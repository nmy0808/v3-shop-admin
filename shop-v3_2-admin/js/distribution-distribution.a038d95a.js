"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[269],{70928:function(e,a,l){l.r(a),l.d(a,{default:function(){return H}});var t=l(66252),r=l(3577),o=l(2262),n=l(49963),d=l(92355),s=l(66489),i=l(47388),u=l(3910),m=l(11718),p=l(4984);l(7599);const c={class:"flex"},f={class:"ml-3"},w={class:"font-bold text-xl"},b={class:"mt-1 opacity-60"},y=(0,t.Uk)("全部"),h=(0,t.Uk)("今天"),U=(0,t.Uk)("昨天"),g=(0,t.Uk)("最近7天"),S=(0,t.Uk)("重置"),_=(0,t.Uk)("搜索"),v={class:"flex items-center"},k={class:"ml-6"},W={class:"text-base font-semibold"},D={class:"text-base font-semibold"},Y={class:"text-base font-semibold"},x={class:"text-base font-semibold"},C=(0,t.Uk)("推广人"),z=(0,t.Uk)("推广订单");var V={__name:"index",setup(e){const a=()=>{const e=(0,o.iH)({day:1,starttime:null,endtime:null,keyword:"",type:"all"}),{loading:a,list:l,pageSearch:t,total:r,getListData:n,deleteData:d,statusData:i}=(0,p.F)({listSearchParams:e,listDataApi:s.agentListApi}),u=async e=>{i({params:{id:e.id,status:e.status},row:e})},m=()=>{n()};return{list:l,loading:a,pageSearch:t,listSearchParams:e,total:r,getUserListData:n,handleStatusChange:u,handleSearch:m,handleDelete:d}},l=()=>{const e=(0,o.iH)(null),a=()=>{e.value.open({title:"推广人列表"})},l=a=>{e.value.open({title:"推广订单列表",data:a})},t=(0,o.iH)(null),r=e=>{t.value.open({title:"推广订单列表",data:e})};return{peopleDrawerRef:e,handleCreate:a,handlePeopleList:l,orderDrawerRef:t,handleOrderList:r}},{list:V,loading:M,pageSearch:H,listSearchParams:L,total:P,handleStatusChange:R,getUserListData:j,handleSearch:N,handleDelete:A}=((0,o.iH)({day:1,starttime:null,endtime:null,keyword:"",type:"all"}),a());j();const{peopleDrawerRef:F,handleCreate:O,handlePeopleList:B,orderDrawerRef:E,handleOrderList:T}=l(),I=(0,o.iH)([]),K=(0,o.iH)(!1),q=[{bg:"#5E97F9",icon:"User"},{bg:"#F38938",icon:"Cellphone"},{bg:"#47CE8D",icon:"Money"},{bg:"#787BF7",icon:"MessageBox"}],G=async()=>{K.value=!0;const{data:e}=await(0,s.statisticsApi)();K.value=!1,I.value=e.panels.map(((e,a)=>({...e,...q[a]})))};return G(),(e,a)=>{const l=(0,t.up)("NIcon"),s=(0,t.up)("NCountTo"),p=(0,t.up)("el-card"),R=(0,t.up)("el-col"),j=(0,t.up)("el-row"),A=(0,t.up)("el-radio"),O=(0,t.up)("el-radio-group"),q=(0,t.up)("el-form-item"),G=(0,t.up)("el-date-picker"),J=(0,t.up)("el-input"),Q=(0,t.up)("el-button"),X=(0,t.up)("el-form"),Z=(0,t.up)("NAvatar"),$=(0,t.up)("NTable"),ee=(0,t.up)("NContainer");return(0,t.wg)(),(0,t.iD)(t.HY,null,[K.value?((0,t.wg)(),(0,t.j4)(m["default"],{key:0})):((0,t.wg)(),(0,t.j4)(j,{key:1,class:"flex w-full px-4"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(I.value,((e,a)=>((0,t.wg)(),(0,t.j4)(R,{key:a,span:6},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{shadow:"never",class:"!mb-0 mt-4 mr-5"},{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("div",{class:"flex items-center justify-center w-14 h-14 m4-2 rounded-full",style:(0,r.j5)({background:e.bg})},[(0,t.Wm)(l,{icon:e.icon,color:"white",class:"relative top-1px",size:20},null,8,["icon"])],4),(0,t._)("div",f,[(0,t._)("div",w,[(0,t.Wm)(s,{duration:.8,value:e.value,fixed:0},null,8,["duration","value"])]),(0,t._)("div",b,(0,r.zw)(e.label),1)])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})),(0,t.Wm)(ee,null,{default:(0,t.w5)((()=>[(0,t.Wm)(X,{ref:"formRef",class:"my-4",model:(0,o.SU)(L),"label-width":"80px",size:"small",inline:"",onSubmit:(0,n.iM)((0,o.SU)(N),["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{label:"时间选择",prop:"name",placeholder:"请输入关键词"},{default:(0,t.w5)((()=>[(0,t.Wm)(O,{modelValue:(0,o.SU)(L).type,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.SU)(L).type=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{label:"all",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[y])),_:1}),(0,t.Wm)(A,{label:"today",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(A,{label:"yesterday",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[U])),_:1}),(0,t.Wm)(A,{label:"last7days",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[g])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"开始时间",prop:"starttime",placeholder:"请输入起始时间"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:(0,o.SU)(L).starttime,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.SU)(L).starttime=e),type:"date",placeholder:"选择日期",format:"YYYY年 MM月 DD日","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"结束时间",prop:"name",placeholder:"请输入结束时间"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:(0,o.SU)(L).endtime,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,o.SU)(L).endtime=e),type:"date",placeholder:"选择日期",format:"YYYY年 MM月 DD日","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(q,{label:"关键词",prop:"keyword",placeholder:"请输入关键词"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,o.SU)(L).keyword,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,o.SU)(L).keyword=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{type:"","native-type":"reset"},{default:(0,t.w5)((()=>[S])),_:1}),(0,t.Wm)(Q,{type:"primary","native-type":"submit"},{default:(0,t.w5)((()=>[_])),_:1})])),_:1})])),_:1},8,["model","onSubmit"]),(0,t.Wm)($,{"table-layout":"auto",ref:"tableRef",data:(0,o.SU)(V),options:(0,o.SU)(d.tableOptions),dragSort:!1,loading:(0,o.SU)(M),total:(0,o.SU)(P),currentPage:(0,o.SU)(H).page,"onUpdate:currentPage":a[4]||(a[4]=e=>(0,o.SU)(H).page=e),pageSize:(0,o.SU)(H).limit,"onUpdate:pageSize":a[5]||(a[5]=e=>(0,o.SU)(H).limit=e)},{"user-info":(0,t.w5)((({row:e})=>[(0,t._)("div",v,[(0,t.Wm)(Z,{src:e.avatar},null,8,["src"]),(0,t._)("div",k,[(0,t._)("div",W,"用户: "+(0,r.zw)(e.username||e.nickname),1),(0,t._)("div",D,"昵称: "+(0,r.zw)(e.nickname||"哈罗~"),1),(0,t._)("div",Y,"姓名: "+(0,r.zw)(e.name||"王冬梅"),1),(0,t._)("div",x,"电话: "+(0,r.zw)(e.phone||13109787787),1)])])])),action:(0,t.w5)((({row:e})=>[(0,t.Wm)(Q,{type:"primary",link:"",size:"small",onClick:a=>(0,o.SU)(B)(e)},{default:(0,t.w5)((()=>[C])),_:2},1032,["onClick"]),(0,t.Wm)(Q,{type:"primary",link:"",size:"small",onClick:a=>(0,o.SU)(T)(e)},{default:(0,t.w5)((()=>[z])),_:2},1032,["onClick"])])),_:1},8,["data","options","loading","total","currentPage","pageSize"]),(0,t.Wm)(i["default"],{ref_key:"peopleDrawerRef",ref:F},null,512),(0,t.Wm)(u["default"],{ref_key:"orderDrawerRef",ref:E},null,512)])),_:1})],64)}}};const M=V;var H=M}}]);