"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[776],{78851:function(e,a,t){t.r(a),t.d(a,{default:function(){return V}});var l=t(66252),i=t(2262),s=t(3577),n=t(49963),d=t(59537),o=t(70588),u=t(70785),r=t(39795),c=t(4984),m=t(7599);const g={class:"flex pl-23"},p={class:"ml-4 flex-1"},w=(0,l._)("span",{class:"ml-2 opacity-60"},"2011-11-11",-1),h={class:"mb-2"},v={class:"text-xl"},S={key:0,class:"mt-2"},f=(0,l.Uk)("修改"),k={class:"w-50 flex justify-end"},_=(0,l.Uk)("取消"),U=(0,l.Uk)("保存"),y={class:"flex"},C={class:"ml-4"},b={class:"text-base font-semibold mt-4"},D=()=>{const e=(0,i.iH)({keyword:"",user_level_id:""}),{loading:a,list:t,pageSearch:l,total:s,getListData:n,deleteData:d,statusData:o}=(0,c.F)({listSearchParams:e,listDataApi:u.goodsCommentListApi,statusDataApi:u.goodsCommentStatusApi}),r=async e=>{o({params:{id:e.id,status:e.status},row:e})},g=a=>{e.value=a,n()},p=async(e,a,t)=>{const l={};l.id=e.id,l.data=a.data,a.editLoading=!0,await(0,u.goodsCommentReviewApi)(l),a.editLoading=!1,(0,m.t6)({message:"提交完成",type:"success"}),a.edit=!1};return{list:t,loading:a,pageSearch:l,total:s,getListData:n,handleStatusChange:r,handleSearch:g,handleDelete:d,handleReviewChange:p}},x=()=>{const e=(0,i.iH)(null),a=()=>{e.value.open({title:"新增"})},t=a=>{e.value.open({title:"编辑",data:a})};return{actionDrawerRef:e,handleCreate:a,handleEdit:t}};var z={__name:"index",setup(e){const{list:a,loading:t,pageSearch:u,total:c,handleStatusChange:m,getListData:z,handleSearch:L,handleReviewChange:V}=D();z();const{actionDrawerRef:W,handleCreate:R,handleEdit:A}=x();return(e,D)=>{const x=(0,l.up)("el-button"),R=(0,l.up)("NSearchHeader"),A=(0,l.up)("NAvatar"),j=(0,l.up)("el-image"),H=(0,l.up)("el-input"),F=(0,l.up)("el-rate"),N=(0,l.up)("el-switch"),P=(0,l.up)("NTable"),E=(0,l.up)("NContainer");return(0,l.wg)(),(0,l.j4)(E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(R,{schema:(0,i.SU)(d.searchSchema),showFold:!0,onSearch:(0,i.SU)(L)},{right:(0,l.w5)((()=>[(0,l.Wm)(x,{size:"small",icon:"el-icon-refresh",onClick:(0,i.SU)(z)},null,8,["onClick"])])),_:1},8,["schema","onSearch"]),(0,l.Wm)(P,{"table-layout":"auto","row-key":"id",ref:"tableRef",data:(0,i.SU)(a),options:(0,i.SU)(o.tableOptions),dragSort:!1,loading:(0,i.SU)(t),total:(0,i.SU)(c),currentPage:(0,i.SU)(u).page,"onUpdate:currentPage":D[0]||(D[0]=e=>(0,i.SU)(u).page=e),pageSize:(0,i.SU)(u).limit,"onUpdate:pageSize":D[1]||(D[1]=e=>(0,i.SU)(u).limit=e)},{expand:(0,l.w5)((({row:e})=>[(0,l._)("div",g,[(0,l.Wm)(A,{src:e.user.avatar},null,8,["src"]),(0,l._)("div",p,[(0,l._)("div",null,[(0,l._)("span",null,(0,s.zw)(e.user.username),1),w]),(0,l._)("div",h,(0,s.zw)(e.review.data),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.review.image,((e,a)=>((0,l.wg)(),(0,l.j4)(j,{key:a,src:e,class:"w-30 h-30"},null,8,["src"])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.extra,((a,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"flex justify-between bg-gray-100 mt-4 mr-4 rounded-4px p-4 dark:bg-black/40"},[(0,l._)("div",null,[(0,l._)("div",v,(0,s.zw)(a.isuser?"客户":"客服"),1),a.edit?((0,l.wg)(),(0,l.j4)(H,{key:1,class:"mt-2 w-1000px",modelValue:a.data,"onUpdate:modelValue":e=>a.data=e,rows:4,type:"textarea",placeholder:"说点什么吧~",disabled:a.editLoading},null,8,["modelValue","onUpdate:modelValue","disabled"])):((0,l.wg)(),(0,l.iD)("div",S,(0,s.zw)(a.data),1))]),(0,l.wy)((0,l.Wm)(x,{type:"primary",size:"small",onClick:e=>a.edit=!0},{default:(0,l.w5)((()=>[f])),_:2},1032,["onClick"]),[[n.F8,!a.edit]]),(0,l.wy)((0,l._)("div",k,[(0,l.Wm)(x,{type:"",size:"small",onClick:e=>a.edit=!1,loading:a.editLoading},{default:(0,l.w5)((()=>[_])),_:2},1032,["onClick","loading"]),(0,l.Wm)(x,{type:"success",size:"small",onClick:t=>(0,i.SU)(V)(e,a,a.data),loading:a.editLoading},{default:(0,l.w5)((()=>[U])),_:2},1032,["onClick","loading"])],512),[[n.F8,a.edit]])])))),128))])])])),goods_info:(0,l.w5)((({row:e})=>[(0,l._)("div",y,[(0,l.Wm)(A,{class:"rounded-2px",src:e.goods_item.cover},null,8,["src"]),(0,l._)("div",C,[(0,l._)("div",b,(0,s.zw)(e.goods_item.title),1)])])])),comment:(0,l.w5)((({row:e})=>[(0,l._)("div",null,"用户: "+(0,s.zw)(e.user.username||e.user.nickname),1),(0,l.Wm)(F,{modelValue:e.rating,"onUpdate:modelValue":a=>e.rating=a,disabled:"","text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])])),status:(0,l.w5)((({row:e})=>[(0,l.Wm)(N,{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,"active-value":1,"inactive-value":0,loading:e.statusLoading,size:"small",onClick:a=>(0,i.SU)(m)(e)},null,8,["modelValue","onUpdate:modelValue","loading","onClick"])])),_:1},8,["data","options","loading","total","currentPage","pageSize"]),(0,l.Wm)(r["default"],{ref_key:"actionDrawerRef",ref:W,getListData:(0,i.SU)(z)},null,8,["getListData"])])),_:1})}}};const L=z;var V=L}}]);