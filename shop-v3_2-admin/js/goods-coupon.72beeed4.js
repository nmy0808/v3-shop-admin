"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[721],{73413:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var l=a(66252),n=a(2262),i=a(3577),s=a(67862),o=a(24509),r=a(43469),u=a(4984);const p={class:"w-120 pl-6 py-4"},d={class:"h-7 font-bold"},c={class:"mt-2"},g={class:"opacity-60"},f=(0,l.Uk)(" 开启 "),w=(0,l.Uk)(" 关闭 "),U=(0,l.Uk)("编辑"),S=(0,l.Uk)("删除"),h=()=>{const{loading:e,list:t,pageSearch:a,total:l,getListData:n,deleteData:i,statusData:s}=(0,u.F)({listDataApi:o.couponListApi,deleteDataApi:o.couponDeleteApi,statusDataApi:o.couponStatusApi}),r=async e=>{s({params:{id:e.id,status:e.status},row:e})};return{list:t,loading:e,pageSearch:a,total:l,getUserListData:n,handleStatusChange:r,handleDelete:i}},k=()=>{const e=(0,n.iH)(null),t=()=>{e.value.open({title:"新增"})},a=t=>{e.value.open({title:"编辑",data:t})};return{actionDrawerRef:e,handleCreate:t,handleEdit:a}};var m={__name:"index",setup(e){const{list:t,loading:a,pageSearch:o,total:u,getUserListData:m,handleDelete:y}=h();m();const{actionDrawerRef:_,handleCreate:D,handleEdit:z}=k();return(e,h)=>{const k=(0,l.up)("NActionHeader"),C=(0,l.up)("el-tag"),v=(0,l.up)("el-button"),b=(0,l.up)("NTable"),A=(0,l.up)("NContainer");return(0,l.wg)(),(0,l.j4)(A,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{onCreate:(0,n.SU)(D),onRefresh:(0,n.SU)(m)},null,8,["onCreate","onRefresh"]),(0,l.Wm)(b,{"table-layout":"auto",ref:"tableRef",data:(0,n.SU)(t),options:(0,n.SU)(s.tableOptions),dragSort:!1,loading:(0,n.SU)(a),total:(0,n.SU)(u),currentPage:(0,n.SU)(o).page,"onUpdate:currentPage":h[0]||(h[0]=e=>(0,n.SU)(o).page=e),pageSize:(0,n.SU)(o).limit,"onUpdate:pageSize":h[1]||(h[1]=e=>(0,n.SU)(o).limit=e)},{name:(0,l.w5)((({row:e})=>[(0,l._)("div",p,[(0,l._)("div",d,(0,i.zw)(e.name),1),(0,l._)("div",c,[(0,l._)("span",g,(0,i.zw)(e.start_time)+" - "+(0,i.zw)(e.end_time),1)])])])),status:(0,l.w5)((({row:e})=>[1===e.status?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"",effect:"light"},{default:(0,l.w5)((()=>[f])),_:1})):((0,l.wg)(),(0,l.j4)(C,{key:1,type:"info",effect:"light"},{default:(0,l.w5)((()=>[w])),_:1}))])),value:(0,l.w5)((({row:e})=>[0===e.type?((0,l.wg)(),(0,l.j4)(C,{key:0,type:"danger",size:"small",effect:"light"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(`优惠 ¥${e.value} 元`),1)])),_:2},1024)):((0,l.wg)(),(0,l.j4)(C,{key:1,type:"",size:"small",effect:"light"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(`折扣 ${e.value} 折`),1)])),_:2},1024))])),action:(0,l.w5)((({row:e})=>[(0,l.Wm)(v,{type:"primary",link:"",size:"small",onClick:t=>(0,n.SU)(z)(e)},{default:(0,l.w5)((()=>[U])),_:2},1032,["onClick"]),(0,l.Wm)(v,{type:"danger",link:"",size:"small",onClick:t=>(0,n.SU)(y)(e)},{default:(0,l.w5)((()=>[S])),_:2},1032,["onClick"])])),_:1},8,["data","options","loading","total","currentPage","pageSize"]),(0,l.Wm)(r["default"],{ref_key:"actionDrawerRef",ref:_,getListData:(0,n.SU)(m)},null,8,["getListData"])])),_:1})}}};const y=m;var _=y}}]);