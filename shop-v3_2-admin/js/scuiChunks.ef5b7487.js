"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[325],{46377:function(e,a,l){l.d(a,{f:function(){return t}});const t="alipay"},4984:function(e,a,l){l.d(a,{F:function(){return i}});var t=l(7599),u=l(2262),r=l(66252);const i=({listSearchParams:e,listDataApi:a,createDataApi:l,updateDataApi:i,statusDataApi:o,deleteDataApi:n})=>{const s=(0,u.iH)(!1),p=(0,u.iH)({page:1,limit:10}),d=(0,u.iH)(0),c=(0,u.iH)([]),m=async()=>{try{s.value=!0;let l={};e&&(l=(0,u.IU)(e.value)),l.page=p.value.page,l.limit=p.value.limit;const{data:t}=await a(l);return c.value=t.list,d.value=t.totalCount,t}finally{s.value=!1}},v=async({params:e,callback:a})=>{try{s.value=!0,await l(e),a&&await a(),(0,t.t6)({message:"新增成功",type:"success"})}finally{s.value=!1}},g=async({params:e,callback:a})=>{try{s.value=!0,await i(e),a&&await a(),(0,t.t6)({message:"编辑完成",type:"success"})}finally{s.value=!1}},f=async({params:e,row:a})=>{try{a.statusLoading=!0,await o(e),void 0!==a.status?a.status?(0,t.t6)({message:"已开启",type:"success"}):(0,t.t6)({message:"已关闭",type:"error"}):(0,t.t6)({message:"状态更新完成",type:"success"})}catch(l){await m()}finally{a.statusLoading=!1}},w=async e=>{const a=await(0,t.iG)({message:"确定删除?"});if(a)try{s.value=!0,await n(e),await m(),(0,t.t6)({message:"已删除",type:"success"})}catch(l){}finally{s.value=!1}};return(0,r.YP)(p,m,{deep:!0}),{loading:s,pageSearch:p,total:d,list:c,getListData:m,createData:v,updateData:g,statusData:f,deleteData:w}}},88607:function(e,a,l){l.d(a,{$D:function(){return s},Cy:function(){return i},T3:function(){return t},Um:function(){return n},bo:function(){return r},nk:function(){return o},qR:function(){return u}});const t=e=>({required:!0,message:e,trigger:"blur"}),u=[{required:!0,message:"等级名称不能为空",trigger:"blur"},{pattern:/^(?:[\u3400-\u4DB5\u4E00-\u9FEA\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0])+$/,message:"等级名称必须是纯汉字组成",trigger:"blur"}],r=[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:4,max:25,message:"用户名需要4-25字符",trigger:"blur"}],i=[{required:!0,message:"昵称不能为空",trigger:"blur"}],o=[{required:!0,message:"密码不能为空",trigger:"blur"}],n=[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],s=[{required:!0,message:"邮箱不能为空",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"邮箱格式不正确",trigger:"blur"}]},62324:function(e,a,l){l.r(a),l.d(a,{menus:function(){return t}});const t=[{icon:"User",title:"用户",color:"#50A7EA",path:"/user/list"},{icon:"ShoppingCart",title:"商品",color:"#8F60F6",path:"/goods/list"},{icon:"Document",title:"订单",color:"#D44CF0",path:"/order/list"},{icon:"ChatDotSquare",title:"评价",color:"#4FBAA7",path:"/comment/list"},{icon:"Picture",title:"图库",color:"#EB4D69",path:"/image/list"},{icon:"ChatLineSquare",title:"公告",color:"#8ED4B2",path:"/notice/list"},{icon:"DocumentCopy",title:"配置",color:"#4B4C4E",path:"/setting/base"},{icon:"CreditCard",title:"优惠券",color:"#F1A945",path:"/coupon/list"}]},92355:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"ID",prop:"id",align:"center"},{label:"用户信息",slot:"user-info",width:"260px",align:""},{label:"推广用户数量",prop:"share_num",align:"center"},{label:"订单数量",prop:"share_order_num",align:"center"},{label:"订单金额",prop:"order_price",align:"center"},{label:"账户佣金",prop:"commission",align:"center"},{label:"已提现金额",prop:"cash_out_price",align:"center"},{label:"提现次数",prop:"cash_out_time",align:"center"},{label:"未提现金额",prop:"no_cash_out_price",align:"center"}])},95324:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return r}});var t=l(2262),u=l(88607);const r=()=>{const e=(0,t.iH)([{type:"input",label:"分类名称",prop:"name",placeholder:"请输入分类名称",value:"",attrs:{clearable:!0},rules:(0,u.T3)("必须输入分类名称")}]);return e}},26013:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"ID",prop:"id",width:"100px",align:"center"},{label:"商品封面",slot:"info",align:""}])},61742:function(e,a,l){l.r(a);var t=l(88607);a["default"]={name:(0,t.T3)("请输入优惠券名称"),start_time:(0,t.T3)("请选择优惠券活动时间范围"),end_time:(0,t.T3)("请选择优惠券活动时间范围"),desc:(0,t.T3)("请输入优惠券描述内容")}},67862:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"优惠券名称",slot:"name",width:"300px",align:""},{label:"状态",prop:"status",slot:"status",width:"100px",align:"center"},{label:"满足条件",prop:"min_price",align:"center",parse:({row:e})=>`¥ ${e.min_price}`},{label:"优惠",prop:"value",slot:"value",align:"center"},{label:"发放数量",prop:"total",align:"center"},{label:"已使用",prop:"used",align:"center",width:"160px"}])},12190:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return o}});var t=l(2262),u=l(49843),r=l(26640),i=l(88607);const o=()=>{const e=(0,t.iH)([{type:"input",label:"商品名称",prop:"title",placeholder:"请输入商品名称, 不能超过60个字符",value:"",attrs:{clearable:!0,maxLength:60},rules:i.bo},{type:"upload",label:"封面",prop:"cover",value:"",customUpload:async e=>{const{data:a}=await(0,r.uploadImageApi)({img:[e]});return a.url}},{type:"select",label:"商品分类",prop:"category_id",placeholder:"请选择商品分类",value:"",attrs:{clearable:!0},children:[],rules:i.Cy},{type:"input",label:"商品描述",prop:"desc",placeholder:"请输入商品描述",value:null,attrs:{clearable:!0,type:"textarea",rows:3},rules:(0,i.T3)("请输入商品描述")},{type:"input",label:"商品单位",prop:"unit",placeholder:"请输入商品单位",value:"",attrs:{clearable:!0},rules:(0,i.T3)("请输入商品单位")},{type:"input-number",label:"总库存",prop:"stock",value:0,attrs:{clearable:!0}},{type:"input-number",label:"库存预警",prop:"min_stock",value:0,attrs:{clearable:!0}},{type:"input-number",label:"最低销售价",prop:"min_price",value:0,attrs:{clearable:!0}},{type:"input-number",label:"最低原价",prop:"min_oprice",value:0,attrs:{clearable:!0}},{type:"switch",label:"库存显示",prop:"stock_display",value:1,attrs:{activeValue:1,inactiveValue:0}},{type:"switch",label:"是否上架(上架/仓库)",prop:"status",value:1,attrs:{activeValue:1,inactiveValue:0}}]),a=async()=>{const{data:a}=await(0,u.goodsListApi)({page:1});e.value.find((e=>"category_id"===e.prop)).children=a.cates.map((e=>({type:"option",value:e.id,label:e.name})))};return a(),e}},12128:function(e,a,l){l.r(a),l.d(a,{searchSchema:function(){return r}});var t=l(2262),u=l(49843);const r=(0,t.iH)([{type:"input",label:"商品名称",prop:"title",placeholder:"搜索商品名称",value:"",attrs:{clearable:!0,style:{width:"200px"}}},{type:"select",label:"商品分类",prop:"category_id",placeholder:"请选择商品分类",value:"",attrs:{clearable:!0},children:[]}]),i=async()=>{const{data:e}=await(0,u.goodsListApi)({page:1});r.value[1].children=e.cates.map((e=>({type:"option",value:e.id,label:e.name})))};i()},8047:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"商品",slot:"info",width:"440px",align:""},{label:"实际销量",prop:"sale_count",align:"center"},{label:"商品状态",prop:"status",slot:"status",align:"center"},{label:"审核状态",prop:"ischeck",slot:"ischeck",align:"center"},{label:"总库存",prop:"stock",align:"center"}])},50578:function(e,a,l){l.r(a);var t=l(88607);a["default"]={name:(0,t.T3)("规格名称不能为空"),default:(0,t.T3)("规格值不能为空")}},63386:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"#",prop:"index",type:"selection",width:"60px",align:"center"},{label:"规格名称",prop:"name",width:"300px",align:""},{label:"规格值",prop:"default",align:"",slot:"skus"},{label:"排序",prop:"order",align:"center"},{label:"状态",prop:"",width:"200px",align:"center",slot:"status"}])},7308:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return o}});var t=l(2262),u=l(95257),r=l(26640),i=l(88607);const o=()=>{const e=(0,t.iH)([{type:"input",label:"用户名",prop:"username",placeholder:"请输入用户名",value:"",attrs:{clearable:!0},rules:i.bo},{type:"input",label:"密码",prop:"password",placeholder:"请输入密码",value:"",attrs:{clearable:!0},rules:i.nk},{type:"input",label:"昵称",prop:"nickname",placeholder:"请输入昵称",value:"",attrs:{clearable:!0},rules:i.Cy},{type:"upload",label:"头像",prop:"avatar",value:"",customUpload:async e=>{const{data:a}=await(0,r.uploadImageApi)({img:[e]});return a.url}},{type:"select",label:"会员等级",prop:"user_level_id",placeholder:"请选择会员等级",value:null,attrs:{clearable:!0},children:[],rules:(0,i.T3)("请选择会员等级")},{type:"input",label:"手机",prop:"phone",placeholder:"请输入手机号",value:"",attrs:{clearable:!0},rules:i.Um},{type:"input",label:"邮箱",prop:"email",placeholder:"请输入邮箱",value:"",attrs:{clearable:!0},rules:i.$D},{type:"switch",label:"状态",prop:"status",value:1,attrs:{activeValue:1,inactiveValue:0}}]),a=async()=>{const{data:a}=await(0,u.userLevelListApi)({page:1});e.value.find((e=>"user_level_id"===e.prop)).children=a.list.map((e=>({type:"option",value:e.id,label:e.name})))};return a(),e}},70002:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return r}});var t=l(2262),u=l(88607);const r=()=>{const e=(0,t.iH)([{type:"input",label:"公告标题",prop:"title",placeholder:"请输入公告标题",value:"",attrs:{clearable:!0},rules:(0,u.T3)("必须输入公告标题")},{type:"input",label:"公告内容",prop:"content",placeholder:"请输入公告内容",value:"",attrs:{type:"textarea",rows:3,clearable:!0},rules:(0,u.T3)("必须输入公告内容")}]);return e}},28409:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"公告标题",prop:"title"},{label:"发布时间",prop:"create_time"}])},72294:function(e,a,l){l.r(a),l.d(a,{menuRules:function(){return u},ruleRules:function(){return r}});var t=l(88607);const u={name:(0,t.T3)("必须填写菜单名称"),icon:"",frontpath:(0,t.T3)("必须填写前端路由规则")},r={rule_id:(0,t.T3)("必须选择上级菜单"),name:(0,t.T3)("必须填写权限名称"),condition:(0,t.T3)("必须填写后端规则"),method:(0,t.T3)("必须选择请求方式")}},30871:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return o}});var t=l(2262),u=l(91056),r=l(26640),i=l(88607);const o=()=>{const e=(0,t.iH)([{type:"input",label:"用户名",prop:"username",placeholder:"请输入用户名",value:"",attrs:{clearable:!0},rules:i.bo},{type:"input",label:"密码",prop:"password",placeholder:"请输入密码",value:"",attrs:{clearable:!0},rules:i.nk},{type:"upload",label:"头像",prop:"avatar",value:"",customUpload:async e=>{const{data:a}=await(0,r.uploadImageApi)({img:[e]});return a.url}},{type:"select",label:"所属管理员",prop:"role_id",placeholder:"请选择所属管理员",value:null,attrs:{clearable:!0},children:[],rules:(0,i.T3)("请选择所属管理员")},{type:"switch",label:"状态",prop:"status",value:1,attrs:{activeValue:1,inactiveValue:0}}]),a=async()=>{const{data:a}=await(0,u.managerListApi)({page:1});e.value.find((e=>"role_id"===e.prop)).children=a.roles.map((e=>({type:"option",value:e.id,label:e.name})))};return a(),e}},44295:function(e,a,l){l.r(a),l.d(a,{searchSchema:function(){return u}});var t=l(2262);l(95257);const u=(0,t.iH)([{type:"input",label:"关键词",prop:"keyword",placeholder:"管理员昵称",value:"",attrs:{clearable:!0,style:{width:"300px"}}}])},16132:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"管理员",slot:"user",width:"",align:""},{label:"所属管理员",prop:"",align:"center",parse:({row:e})=>e?.role?.name||"-"},{label:"状态",prop:"",align:"center",slot:"status"}])},16244:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return r}});var t=l(2262),u=l(88607);const r=()=>{const e=(0,t.iH)([{type:"input",label:"角色名称",prop:"name",placeholder:"请角色名称",value:"",attrs:{clearable:!0},rules:(0,u.T3)("角色名称不能为空")},{type:"input",label:"角色描述",prop:"desc",placeholder:"请输入角色描述",value:"",attrs:{type:"textarea",rows:"5"},rules:(0,u.T3)("角色描述不能为空")},{type:"switch",label:"状态",prop:"status",value:1,attrs:{activeValue:1,inactiveValue:0}}]);return e}},16212:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"角色名称",prop:"name",width:"",align:"center"},{label:"角色描述",prop:"desc",width:"",align:"center"},{label:"状态",prop:"",width:"200px",align:"center",slot:"status"}])},67180:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return o}});var t=l(2262),u=l(95257),r=l(26640),i=l(88607);const o=()=>{const e=(0,t.iH)([{type:"input",label:"用户名",prop:"username",placeholder:"请输入用户名",value:"",attrs:{clearable:!0},rules:i.bo},{type:"input",label:"密码",prop:"password",placeholder:"请输入密码",value:"",attrs:{clearable:!0},rules:i.nk},{type:"input",label:"昵称",prop:"nickname",placeholder:"请输入昵称",value:"",attrs:{clearable:!0},rules:i.Cy},{type:"upload",label:"头像",prop:"avatar",value:"",customUpload:async e=>{const{data:a}=await(0,r.uploadImageApi)({img:[e]});return a.url}},{type:"select",label:"会员等级",prop:"user_level_id",placeholder:"请选择会员等级",value:null,attrs:{clearable:!0},children:[],rules:(0,i.T3)("请选择会员等级")},{type:"input",label:"手机",prop:"phone",placeholder:"请输入手机号",value:"",attrs:{clearable:!0},rules:i.Um},{type:"input",label:"邮箱",prop:"email",placeholder:"请输入邮箱",value:"",attrs:{clearable:!0},rules:i.$D},{type:"switch",label:"状态",prop:"status",value:1,attrs:{activeValue:1,inactiveValue:0}}]),a=async()=>{const{data:a}=await(0,u.userLevelListApi)({page:1});e.value.find((e=>"user_level_id"===e.prop)).children=a.list.map((e=>({type:"option",value:e.id,label:e.name})))};return a(),e}},59537:function(e,a,l){l.r(a),l.d(a,{searchSchema:function(){return u}});var t=l(2262);const u=(0,t.iH)([{type:"input",label:"关键词",prop:"title",placeholder:"要搜索的商品",value:"",attrs:{clearable:!0,style:{width:"200px"}}}])},70588:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{type:"expand",slot:"expand"},{label:"ID",prop:"id",width:"80px",align:"center"},{label:"商品",slot:"goods_info",width:"",align:""},{label:"评价信息",slot:"comment",align:"center"},{label:"评价时间",prop:"review_time",align:"center"},{label:"是否显示",slot:"status",width:"200px",align:"center"}])},10128:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return i}});var t=l(2262),u=l(93067),r=l(88607);const i=()=>{const e=(0,t.iH)([{type:"input",label:"快递单号",prop:"express_no",placeholder:"请输入快递单号",value:"",attrs:{clearable:!0},rules:(0,r.T3)("必须填写快递单号")},{type:"select",label:"快递公司",prop:"express_company",placeholder:"请选择快递公司",value:null,attrs:{clearable:!0},children:[],rules:(0,r.T3)("请选择快递公司")}]),a=async()=>{const{data:a}=await(0,u.expressCompanyListApi)({page:1});e.value.find((e=>"express_company"===e.prop)).children=a.list.map((e=>({type:"option",value:e.id,label:e.name})))};return a(),e}},73664:function(e,a,l){l.r(a),l.d(a,{searchSchema:function(){return r}});var t=l(2262),u=l(95257);const r=(0,t.iH)([{type:"input",label:"订单编号",prop:"no",placeholder:"请输入订单编号",value:"",attrs:{clearable:!0,style:{width:"200px",marginRight:"1000px"}}},{type:"input",label:"收货人",prop:"name",placeholder:"请输入收货人",value:"",attrs:{clearable:!0,style:{width:"200px"}}},{type:"input",label:"手机号",prop:"phone",placeholder:"请输入收货人手机号",value:"",attrs:{clearable:!0,style:{width:"200px"}}},{type:"date-picker",label:"开始时间",prop:"starttime",placeholder:"选择开始时间",value:"",attrs:{format:"YYYY年 MM月 DD日",valueFormat:"YYYY-MM-DD",clearable:!0,style:{width:"200px"}}},{type:"date-picker",label:"结束时间",prop:"endtime",placeholder:"选择结束时间",value:"",attrs:{format:"YYYY年 MM月 DD日",valueFormat:"YYYY-MM-DD",clearable:!0,style:{width:"200px"}}}]),i=async()=>{const{data:e}=await(0,u.userLevelListApi)({page:1});r.value[1].children=e.list.map((e=>({type:"option",value:e.id,label:e.name})))};i()},2362:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{type:"selection",width:"60px",align:"center"},{label:"商品",slot:"goods-info",width:"400px",align:""},{label:"实付款",prop:"total_price",align:"center"},{label:"买家",slot:"user",align:"center"},{label:"交易状态",slot:"status-info",align:"center"}])},62420:function(e,a,l){l.r(a),l.d(a,{apiSchema:function(){return i},registrySchema:function(){return u},uploadSchema:function(){return r}});var t=l(2262);l(95257);const u=(0,t.iH)([{type:"radio-group",label:"是否允许注册会员",prop:"open_reg",placeholder:"",value:1,children:[{type:"radio",label:1,border:!0,text:"是"},{type:"radio",label:0,border:!0,text:"否"}],attrs:{}},{type:"radio-group",label:"注册类型",prop:"reg_method",placeholder:"",value:"username",children:[{type:"radio",label:"username",border:!0,text:"普通注册"},{type:"radio",label:"phone",border:!0,text:"手机"}],attrs:{}},{type:"input",label:"密码最小长度",prop:"password_min",placeholder:"请输入密码最小长度",value:"",attrs:{clearable:!0,style:{width:"400px"}}},{type:"checkbox-group",label:"强制密码复杂度",prop:"password_encrypt",placeholder:"",value:[],children:[{type:"checkbox",label:"0",border:!0,text:"数字"},{type:"checkbox",label:"1",border:!0,text:"小写字母"},{type:"checkbox",label:"2",border:!0,text:"大写字母"}],attrs:{}}]),r=(0,t.iH)([{type:"radio-group",label:"默认上传方式",prop:"upload_method",placeholder:"",value:"oss",children:[{type:"radio",label:"oss",border:!0,text:"阿里oss"}],attrs:{}},{type:"input",label:"Bucket",prop:"Bucket",placeholder:"请输入Bucket",value:"",attrs:{clearable:!0,style:{width:"400px"}}},{type:"input",label:"ACCESS_KEY",prop:"ACCESS_KEY",placeholder:"请输入ACCESS_KEY",value:"",attrs:{clearable:!0,style:{width:"400px"}}},{type:"input",label:"SECRET_KEY",prop:"SECRET_KEY",placeholder:"请输入SECRET_KEY",value:"",attrs:{clearable:!0,style:{width:"400px"}}},{type:"input",label:"http",prop:"http",placeholder:"请输入http",value:"",attrs:{clearable:!0,style:{width:"400px"}}}]),i=(0,t.iH)([{type:"radio-group",label:"是否开启API安全",prop:"api_safe",placeholder:"",value:1,children:[{type:"radio",label:1,border:!0,text:"开启"},{type:"radio",label:0,border:!0,text:"关闭"}],attrs:{}},{type:"input",label:"密匙",prop:"api_secret",placeholder:"请输入密匙",value:"",attrs:{clearable:!0,style:{width:"400px"}}}])},11687:function(e,a,l){l.r(a),l.d(a,{getAliSchema:function(){return r},getWxSchema:function(){return i}});var t=l(2262),u=(l(59052),l(88607));const r=()=>{const e=(0,t.iH)([{type:"input",label:"app_id",prop:"app_id",placeholder:"请输入app_id",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入app_id")},{type:"input",label:"公钥 ",prop:"ali_public_key",placeholder:"请输入公钥",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入公钥")},{type:"input",label:"私钥",prop:"private_key",placeholder:"请输入私钥",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入私钥")}]);return e},i=()=>{const e=(0,t.iH)([{type:"input",label:"公众号 APPID",prop:"app_id",placeholder:"公众号APPID",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入公众号APPID")},{type:"input",label:"小程序 APPID",prop:"miniapp_id",placeholder:"小程序APPID",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入小程序APPID")},{type:"input",label:"小程序 secret",prop:"secret",placeholder:"小程序secret",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入小程序secret")},{type:"input",label:"appid",prop:"appid",placeholder:"appid",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入appid")},{type:"input",label:"商户号",prop:"mch_id",placeholder:"商户号",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入商户号")},{type:"input",label:"API 秘钥",prop:"key",placeholder:"API秘钥",value:"",attrs:{clearable:!0},rules:(0,u.T3)("请输入API秘钥")}]);return e}},17564:function(e,a,l){l.r(a),l.d(a,{buySchema:function(){return u}});var t=l(2262);const u=(0,t.iH)([{type:"input-number",label:"未支付订单",prop:"close_order_minute",placeholder:"",value:0,appendText:"分钟后自动关闭",attrs:{clearable:!0,style:{width:"130px"}}},{type:"input-number",label:"已发货订单",prop:"auto_received_day",placeholder:"",value:0,appendText:"天后自动确认收货",attrs:{clearable:!0,style:{width:"130px"}}},{type:"input-number",label:"已完成订单",prop:"after_sale_day",placeholder:"",value:0,appendText:"天内允许申请售后",attrs:{clearable:!0,style:{width:"130px"}}}])},23438:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return r}});var t=l(2262),u=l(88607);const r=()=>{const e=(0,t.iH)([{type:"input",label:"等级名称",prop:"name",placeholder:"请输入等级名称",value:"",attrs:{clearable:!0},rules:u.qR},{type:"input-number",label:"等级权重",prop:"level",value:0,attrs:{clearable:!0,min:0,max:1e3}},{type:"switch",label:"是否启用",prop:"status",value:1,attrs:{activeValue:1,inactiveValue:0}},{type:"input-number",label:"累计消费升级 (元)",prop:"max_price",value:0,attrs:{precision:2,min:0}},{type:"input-number",label:"累计次数升级 (次)",prop:"max_times",value:0,attrs:{precision:2,min:0}},{type:"input-number",label:"折扣率 (%)",prop:"discount",value:0,attrs:{precision:2,min:0,max:100}}]);return e}},17248:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"等级名称",prop:"name",width:"",align:"center"},{label:"会员等级",prop:"",width:"",align:"center",parse:({row:e})=>e?.user_level?.name||"普通会员"},{label:"折扣率(%)",prop:"discount",width:"",align:"center"},{label:"等级序号",prop:"level",width:"",align:"center"},{label:"状态",prop:"",width:"",align:"center",slot:"status"}])},7461:function(e,a,l){l.r(a),l.d(a,{getActionSchema:function(){return o}});var t=l(2262),u=l(95257),r=l(26640),i=l(88607);const o=()=>{const e=(0,t.iH)([{type:"input",label:"用户名",prop:"username",placeholder:"请输入用户名",value:"",attrs:{clearable:!0},rules:i.bo},{type:"input",label:"密码",prop:"password",placeholder:"请输入密码",value:"",attrs:{clearable:!0},rules:i.nk},{type:"input",label:"昵称",prop:"nickname",placeholder:"请输入昵称",value:"",attrs:{clearable:!0},rules:i.Cy},{type:"upload",label:"头像",prop:"avatar",value:"",customUpload:async e=>{const{data:a}=await(0,r.uploadImageApi)({img:[e]});return a.url}},{type:"select",label:"会员等级",prop:"user_level_id",placeholder:"请选择会员等级",value:null,attrs:{clearable:!0},children:[],rules:(0,i.T3)("请选择会员等级")},{type:"input",label:"手机",prop:"phone",placeholder:"请输入手机号",value:"",attrs:{clearable:!0},rules:i.Um},{type:"input",label:"邮箱",prop:"email",placeholder:"请输入邮箱",value:"",attrs:{clearable:!0},rules:i.$D},{type:"switch",label:"状态",prop:"status",value:1,attrs:{activeValue:1,inactiveValue:0}}]),a=async()=>{const{data:a}=await(0,u.userLevelListApi)({page:1});e.value.find((e=>"user_level_id"===e.prop)).children=a.list.map((e=>({type:"option",value:e.id,label:e.name})))};return a(),e}},20449:function(e,a,l){l.r(a),l.d(a,{searchSchema:function(){return r}});var t=l(2262),u=l(95257);const r=(0,t.iH)([{type:"input",label:"关键词",prop:"keyword",placeholder:"手机号/邮箱/会员昵称",value:"",attrs:{clearable:!0,style:{width:"200px"}}},{type:"select",label:"会员等级",prop:"user_level_id",placeholder:"请选择会员等级",value:"",attrs:{clearable:!0},children:[]}]),i=async()=>{const{data:e}=await(0,u.userLevelListApi)({page:1});r.value[1].children=e.list.map((e=>({type:"option",value:e.id,label:e.name})))};i()},41605:function(e,a,l){l.r(a),l.d(a,{tableOptions:function(){return u}});var t=l(2262);const u=(0,t.iH)([{label:"会员",slot:"user",width:"",align:""},{label:"会员等级",prop:"",width:"200px",align:"center",parse:({row:e})=>e?.user_level?.name||"普通会员"},{label:"登录注册",prop:"",width:"200px",align:"center",parse:({row:e})=>{const a=e.create_time;return a}},{label:"状态",prop:"",width:"200px",align:"center",slot:"status"}])},55065:function(e,a,l){l.r(a),l.d(a,{default:function(){return _}});var t=l(66252);const u={class:"flex justify-between"},r={class:"opacity-70"},i={class:"text-20px font-bold"},o={class:"flex justify-between"},n={class:"opacity-70"},s={class:"flex justify-center"},p={class:"flex justify-center mt-1"},d={class:"flex justify-between mb-4"},c={class:"flex w-70 justify-between"},m={class:"flex justify-between mb-4"},v={class:"flex flex-col justify-center items-center bg-gray-100 dark:bg-black/10 h-30"},g={class:"flex justify-between mb-4"},f={class:"flex flex-col justify-center items-center bg-gray-100 dark:bg-black/10 h-30"};function w(e,a){const l=(0,t.up)("el-skeleton-item"),w=(0,t.up)("el-skeleton"),b=(0,t.up)("el-divider"),y=(0,t.up)("el-card"),h=(0,t.up)("el-col"),_=(0,t.up)("el-row");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(_,{gutter:20},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(4,((e,a)=>(0,t.Wm)(h,{key:a,span:12,md:6,offset:0},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t._)("div",r,[(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})]),(0,t.Wm)(w,{animated:"",class:"w-10"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})]),(0,t._)("div",null,[(0,t.Wm)(b,{class:"m-0 my-6"}),(0,t._)("div",i,[(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})]),(0,t.Wm)(b,{class:"m-0 my-6"})]),(0,t._)("div",o,[(0,t._)("div",n,[(0,t.Wm)(w,{animated:"",class:"w-30"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})]),(0,t.Wm)(w,{animated:"",class:"w-10"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})])])),_:1})])),_:1}))),64))])),_:1}),(0,t.Wm)(_,{gutter:20},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(8,((e,a)=>(0,t.Wm)(h,{key:a,span:6,md:3,offset:0,class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{shadow:"never",class:"flex justify-center"},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t.Wm)(w,{animated:"",class:"w-10"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})]),(0,t._)("div",p,[(0,t.Wm)(w,{animated:"",class:"w-10"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})])])),_:1})])),_:1}))),64))])),_:1}),(0,t.Wm)(_,{gutter:20},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{span:24,md:12,offset:0},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{shadow:"never",class:"h-140"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1}),(0,t._)("div",c,[(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1}),(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1}),(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})])]),(0,t.Wm)(b),(0,t.Wm)(w,{animated:"",rows:5,class:"mt-20"})])),_:1})])),_:1}),(0,t.Wm)(h,{span:24,md:12,offset:0},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t.Wm)(w,{animated:"",class:"w-30"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1}),(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})]),(0,t.Wm)(b),(0,t.Wm)(_,{gutter:20},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(4,((e,a)=>(0,t.Wm)(h,{key:a,span:6},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t.Wm)(w,{animated:"",class:"w-10"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"}),(0,t.Wm)(l,{variant:"rect",class:"mt-2"})])),_:1})])])),_:1}))),64))])),_:1})])),_:1}),(0,t.Wm)(y,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t.Wm)(w,{animated:"",class:"w-30"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1}),(0,t.Wm)(w,{animated:"",class:"w-20"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"})])),_:1})]),(0,t.Wm)(b),(0,t.Wm)(_,{gutter:20},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(4,((e,a)=>(0,t.Wm)(h,{key:a,span:6},{default:(0,t.w5)((()=>[(0,t._)("div",f,[(0,t.Wm)(w,{animated:"",class:"w-10"},{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect"}),(0,t.Wm)(l,{variant:"rect",class:"mt-2"})])),_:1})])])),_:1}))),64))])),_:1})])),_:1})])),_:1})])),_:1})],64)}var b=l(83744);const y={},h=(0,b.Z)(y,[["render",w]]);var _=h},11718:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252);const u={class:"flex"},r={class:"flex items-center justify-center w-14 h-14 m4-2 rounded-full"},i={class:"ml-3"};function o(e,a){const l=(0,t.up)("el-skeleton-item"),o=(0,t.up)("el-skeleton"),n=(0,t.up)("el-card"),s=(0,t.up)("el-col"),p=(0,t.up)("el-row");return(0,t.wg)(),(0,t.j4)(p,{class:"flex w-full px-4"},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(4,((e,a)=>(0,t.Wm)(s,{key:a,span:6},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{shadow:"never",class:"!mb-0 mt-4 mr-5"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t._)("div",r,[(0,t.Wm)(o,null,{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect",class:"w-14"})])),_:1})]),(0,t._)("div",i,[(0,t.Wm)(o,null,{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect",class:"w-10"})])),_:1}),(0,t.Wm)(o,null,{template:(0,t.w5)((()=>[(0,t.Wm)(l,{variant:"rect",class:"w-20"})])),_:1})])])])),_:1})])),_:1}))),64))])),_:1})}var n=l(83744);const s={},p=(0,n.Z)(s,[["render",o]]);var d=p},3910:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(66252),u=l(49963),r=l(2262);l(4984),l(7599);const i={class:""},o=(0,t.Uk)("全部"),n=(0,t.Uk)("今天"),s=(0,t.Uk)("昨天"),p=(0,t.Uk)("最近7天"),d=(0,t.Uk)("全部"),c=(0,t.Uk)("一级推广"),m=(0,t.Uk)("二级推广"),v=(0,t.Uk)("重置"),g=(0,t.Uk)("搜索");var f={__name:"OrderDrawer",props:{},setup(e,{expose:a}){const l=(0,r.iH)(!1),f=(0,r.iH)(!1),w=((0,r.iH)([]),(0,r.iH)(""));let b=null;(0,t.YP)(l,(()=>{l.value||(y.value={keyword:"",type:"all",starttime:null,endtime:null,level:"0",user_id:null})}));const y=(0,r.iH)({keyword:"",type:"all",starttime:null,endtime:null,level:"0",user_id:null}),h=({title:e,data:a})=>{w.value=e,y.value.id=a.id,b=a,l.value=!0},_=async()=>{},D=()=>{l.value=!1},k=()=>{l.value=!1};return a({open:h}),(e,a)=>{const r=(0,t.up)("el-radio"),b=(0,t.up)("el-radio-group"),h=(0,t.up)("el-form-item"),A=(0,t.up)("el-date-picker"),W=(0,t.up)("el-button"),V=(0,t.up)("el-form"),S=(0,t.up)("el-table-column"),U=(0,t.up)("el-table"),x=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(x,{modelValue:l.value,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value=e),title:w.value,loading:f.value,onCancel:D,onConfirm:k,showConfirmBtn:!1,cancelBtnText:"关闭"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{ref:"formRef",model:y.value,"label-width":"80px",size:"small",onSubmit:(0,u.iM)(_,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"时间选择",prop:"type",placeholder:"请输入关键词"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:y.value.type,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.type=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"all",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[o])),_:1}),(0,t.Wm)(r,{label:"today",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[n])),_:1}),(0,t.Wm)(r,{label:"yesterday",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[s])),_:1}),(0,t.Wm)(r,{label:"last7days",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[p])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"开始时间",prop:"starttime",placeholder:"请输入起始时间"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:y.value.starttime,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.starttime=e),type:"date",placeholder:"选择日期",format:"YYYY年 MM月 DD日","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"结束时间",prop:"endtime",placeholder:"请输入结束时间"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:y.value.endtime,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value.endtime=e),type:"date",placeholder:"选择日期",format:"YYYY年 MM月 DD日","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"用户类型",prop:"level"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:y.value.level,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value.level=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"0",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[d])),_:1}),(0,t.Wm)(r,{label:"1",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(r,{label:"2",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[m])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{type:"","native-type":"reset"},{default:(0,t.w5)((()=>[v])),_:1}),(0,t.Wm)(W,{type:"primary","native-type":"submit"},{default:(0,t.w5)((()=>[g])),_:1})])),_:1})])),_:1},8,["model","onSubmit"]),(0,t.Wm)(U,{data:[],size:"small"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{label:"订单号"}),(0,t.Wm)(S,{label:"用户名|昵称|手机"}),(0,t.Wm)(S,{label:"时间"}),(0,t.Wm)(S,{label:"返佣金额"})])),_:1})])),_:1},8,["modelValue","title","loading"])])}}};const w=f;var b=w},47388:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(66252),u=l(49963),r=l(2262);l(4984),l(7599);const i={class:""},o=(0,t.Uk)("全部"),n=(0,t.Uk)("今天"),s=(0,t.Uk)("昨天"),p=(0,t.Uk)("最近7天"),d=(0,t.Uk)("全部"),c=(0,t.Uk)("一级推广"),m=(0,t.Uk)("二级推广"),v=(0,t.Uk)("重置"),g=(0,t.Uk)("搜索");var f={__name:"PeopleDrawer",props:{},setup(e,{expose:a}){const l=(0,r.iH)(!1),f=(0,r.iH)(!1),w=((0,r.iH)([]),(0,r.iH)(""));let b=null;(0,t.YP)(l,(()=>{l.value||(y.value={keyword:"",type:"all",starttime:null,endtime:null,level:"0",user_id:null})}));const y=(0,r.iH)({keyword:"",type:"all",starttime:null,endtime:null,level:"0",user_id:null}),h=({title:e,data:a})=>{w.value=e,y.value.id=a.id,b=a,l.value=!0},_=async()=>{},D=()=>{l.value=!1},k=()=>{l.value=!1};return a({open:h}),(e,a)=>{const r=(0,t.up)("el-radio"),b=(0,t.up)("el-radio-group"),h=(0,t.up)("el-form-item"),A=(0,t.up)("el-date-picker"),W=(0,t.up)("el-button"),V=(0,t.up)("el-form"),S=(0,t.up)("el-table-column"),U=(0,t.up)("el-table"),x=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(x,{modelValue:l.value,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value=e),title:w.value,loading:f.value,onCancel:D,onConfirm:k,showConfirmBtn:!1,cancelBtnText:"关闭"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{ref:"formRef",model:y.value,"label-width":"80px",size:"small",onSubmit:(0,u.iM)(_,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"时间选择",prop:"type",placeholder:"请输入关键词"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:y.value.type,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.type=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"all",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[o])),_:1}),(0,t.Wm)(r,{label:"today",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[n])),_:1}),(0,t.Wm)(r,{label:"yesterday",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[s])),_:1}),(0,t.Wm)(r,{label:"last7days",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[p])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"开始时间",prop:"starttime",placeholder:"请输入起始时间"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:y.value.starttime,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.starttime=e),type:"date",placeholder:"选择日期",format:"YYYY年 MM月 DD日","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"结束时间",prop:"endtime",placeholder:"请输入结束时间"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:y.value.endtime,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value.endtime=e),type:"date",placeholder:"选择日期",format:"YYYY年 MM月 DD日","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,{label:"用户类型",prop:"level"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:y.value.level,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value.level=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"0",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[d])),_:1}),(0,t.Wm)(r,{label:"1",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(r,{label:"2",border:"",class:"!mr-2"},{default:(0,t.w5)((()=>[m])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{type:"","native-type":"reset"},{default:(0,t.w5)((()=>[v])),_:1}),(0,t.Wm)(W,{type:"primary","native-type":"submit"},{default:(0,t.w5)((()=>[g])),_:1})])),_:1})])),_:1},8,["model","onSubmit"]),(0,t.Wm)(U,{data:[],size:"small"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{label:"UID"}),(0,t.Wm)(S,{label:"头像"}),(0,t.Wm)(S,{label:"用户信息"}),(0,t.Wm)(S,{label:"推广书"}),(0,t.Wm)(S,{label:"推广订单数"}),(0,t.Wm)(S,{label:"绑定时间"})])),_:1})])),_:1},8,["modelValue","title","loading"])])}}};const w=f;var b=w},79706:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(95324),i=l(72451),o=l(4984);const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:p,loading:d}=(0,o.F)({createDataApi:i.categoryCreateApi,updateDataApi:i.categoryEditApi}),c=(0,u.iH)(!1),m=(0,u.iH)([]),v=(0,u.iH)("");let g=null;(0,t.YP)(c,(()=>{c.value||(g=null)}));const f=e=>{m.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},w=({title:e,data:a})=>{m.value=(0,r.getActionSchema)().value,v.value=e,a&&(g=a,f(a)),c.value=!0},b=async e=>{g?await p({params:{...e,id:g.id},callback:()=>{c.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{c.value=!1,l.getListData&&l.getListData()}})};return a({open:w}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:c.value,"onUpdate:visible":a[0]||(a[0]=e=>c.value=e),title:v.value,schema:m.value,loading:(0,u.SU)(d),formOptions:{labelWidth:"100px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p},72934:function(e,a,l){l.r(a),l.d(a,{default:function(){return E}});var t=l(66252),u=l(2262),r=l(3577),i=l(95324),o=l(72451),n=l(10204),s=l(4984),p=l(26013),d=l(7599),c=l(49963),m=l(49843);const v=(0,u.iH)([{type:"selection",width:"60",align:"center"},{label:"商品",slot:"info",width:"340px",align:""}]),g=(0,t.Uk)("搜索"),f={class:"flex"},w={class:"ml-4"},b={class:"text-xl font-semibold"},y={class:"opacity-60"},h={class:"text-red-500 font-bold"},_={class:"mt-4 flex justify-end"},D=(0,t.Uk)("取消"),k=(0,t.Uk)("确定");var A={__name:"index",setup(e,{expose:a}){const l=()=>{const e=(0,u.iH)({title:"",category_id:"",tab:"saling"}),{loading:a,list:l,pageSearch:t,total:r,getListData:i,deleteData:o,statusData:n}=(0,s.F)({listSearchParams:e,listDataApi:m.goodsListApi,deleteDataApi:m.goodsBatchDeleteApi,statusDataApi:m.goodsCheckApi}),p=async(e,a)=>{try{e.checkLoading=!0;const l={id:e.id,ischeck:a};await(0,m.goodsCheckApi)(l),await i(),(0,d.t6)({message:1===a?"已同意":"已拒绝",type:"success"})}finally{e.checkLoading=!1}},c=()=>{i()};return{list:l,loading:a,pageSearch:t,total:r,listSearchParams:e,getUserListData:i,handleStatusChange:p,handleSearch:c,handleDelete:o}},{list:i,loading:o,pageSearch:n,total:p,listSearchParams:A,getUserListData:W,handleSearch:V}=l(),S=(0,u.iH)(!1);let U=[],x=null;const H=(0,u.iH)([]),C=e=>{x=e,S.value=!0,W().then((e=>{H.value=e.cates}))},F=e=>{U=e},L=()=>{U.length>0&&x&&x([...U]),S.value=!1};return(0,t.YP)(S,(()=>{S.value?(0,t.Y3)((()=>{const e=document.querySelector(".el-dialog__body");e.style.paddingTop=0})):U=[]})),a({open:C}),(e,a)=>{const l=(0,t.up)("el-input"),s=(0,t.up)("el-button"),d=(0,t.up)("NAvatar"),m=(0,t.up)("el-divider"),W=(0,t.up)("NTable"),U=(0,t.up)("NDialog");return(0,t.wg)(),(0,t.j4)(U,{modelValue:S.value,"onUpdate:modelValue":a[4]||(a[4]=e=>S.value=e),title:"商品选择"},{header:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:(0,u.SU)(A).title,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,u.SU)(A).title=e),placeholder:"商品名称",class:"w-100 mr-2 mb-4 relative top-1px",clearable:"",size:"small",onKeyup:(0,c.D2)((0,u.SU)(V),["enter"])},null,8,["modelValue","onKeyup"]),(0,t.Wm)(s,{type:"primary",size:"small",onClick:(0,u.SU)(V)},{default:(0,t.w5)((()=>[g])),_:1},8,["onClick"])])),content:(0,t.w5)((()=>[(0,t.Wm)(W,{"table-layout":"auto",ref:"tableRef",data:(0,u.SU)(i),options:(0,u.SU)(v),dragSort:!1,loading:(0,u.SU)(o),total:(0,u.SU)(p),currentPage:(0,u.SU)(n).page,"onUpdate:currentPage":a[1]||(a[1]=e=>(0,u.SU)(n).page=e),pageSize:(0,u.SU)(n).limit,"onUpdate:pageSize":a[2]||(a[2]=e=>(0,u.SU)(n).limit=e),onSelectionChange:F},{info:(0,t.w5)((({row:e})=>[(0,t._)("div",f,[(0,t.Wm)(d,{src:e.cover,class:"rounded-10px w-30 h-30"},null,8,["src"]),(0,t._)("div",w,[(0,t._)("div",b,(0,r.zw)(e.title),1),(0,t._)("div",y,[(0,t._)("span",h,"¥"+(0,r.zw)(e.min_price),1),(0,t.Wm)(m,{direction:"vertical"}),(0,t._)("span",null,"¥"+(0,r.zw)(e.min_oprice),1)]),(0,t._)("div",null," 分类: "+(0,r.zw)(H.value.find((a=>a.id===e.category_id))?.name),1),(0,t._)("div",null," 创建时间: "+(0,r.zw)(e.create_time),1)])])])),_:1},8,["data","options","loading","total","currentPage","pageSize"])])),footer:(0,t.w5)((()=>[(0,t._)("div",_,[(0,t.Wm)(s,{type:"",onClick:a[3]||(a[3]=e=>S.value=!1)},{default:(0,t.w5)((()=>[D])),_:1}),(0,t.Wm)(s,{type:"primary",onClick:L},{default:(0,t.w5)((()=>[k])),_:1})])])),_:1},8,["modelValue"])}}},W=l(83744);const V=(0,W.Z)(A,[["__scopeId","data-v-7469f3e5"]]);var S=V;const U={class:"flex items-center"},x={class:"ml-4"},H=(0,t.Uk)("删除"),C=(0,t.Uk)("选择"),F=(0,t.Uk)("关闭");var L={__name:"RecommendDrawer",props:{getListData:{type:Function,default:null}},emits:["refreshList"],setup(e,{expose:a,emit:l}){const c=e,{createData:m,updateData:v,loading:g,deleteData:f}=(0,s.F)({createDataApi:o.categoryCreateApi,updateDataApi:o.categoryEditApi,deleteDataApi:n.categoryItemDeleteApi}),w=(0,u.iH)(!1),b=(0,u.iH)([]),y=(0,u.iH)(""),h=(0,u.iH)(null);(0,t.YP)(w,(()=>{w.value||(h.value=null)}));let _=null;const D=async()=>{const{data:e}=await(0,n.categoryItemListApi)(_);return h.value=e,e},k=async({title:e,params:a})=>{_=a,b.value=(0,i.getActionSchema)().value,y.value=e,await D(),w.value=!0},A=async e=>{h.value?await v({params:{...e,id:h.value.id},callback:()=>{w.value=!1,c.getListData&&c.getListData()}}):await m({params:e,callback:()=>{w.value=!1,c.getListData&&c.getListData()}})},W=async e=>{const a=await(0,d.iG)({message:"确定删除?"});if(a)try{g.value=!0,await(0,n.categoryItemDeleteApi)({id:e.id}),(0,d.t6)({title:"删除完成",type:"success"})}finally{await D(),g.value=!1}},V=()=>{w.value=!1},L=(0,u.iH)(null),Y=()=>{L.value.open((async e=>{g.value=!0;try{await(0,n.categoryItemSetApi)({category_id:_.category_id,goods_ids:e.map((e=>e.id))}),await D(),(0,d.t6)({message:"添加完成",type:"success"})}finally{g.value=!1}}))};return a({open:k}),(e,a)=>{const l=(0,t.up)("NAvatar"),i=(0,t.up)("el-button"),o=(0,t.up)("NTable"),n=(0,t.up)("nDrawer");return(0,t.wg)(),(0,t.j4)(n,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value=e),title:y.value,loading:(0,u.SU)(g),onConfirm:A},{footer:(0,t.w5)((()=>[(0,t.Wm)(i,{onClick:Y,type:"success"},{default:(0,t.w5)((()=>[C])),_:1}),(0,t.Wm)(i,{type:"",onClick:V,loading:(0,u.SU)(g)},{default:(0,t.w5)((()=>[F])),_:1},8,["loading"])])),default:(0,t.w5)((()=>[w.value?((0,t.wg)(),(0,t.j4)(o,{key:0,options:(0,u.SU)(p.tableOptions),data:h.value,dragSort:!1,loading:(0,u.SU)(g),"table-layout":"auto"},{info:(0,t.w5)((({row:e})=>[(0,t._)("div",U,[(0,t.Wm)(l,{src:e.cover,class:"rounded-2px"},null,8,["src"]),(0,t._)("span",x,(0,r.zw)(e.name),1)])])),action:(0,t.w5)((({row:e})=>[(0,t.Wm)(i,{type:"primary",link:"",size:"small",onClick:a=>W(e)},{default:(0,t.w5)((()=>[H])),_:2},1032,["onClick"])])),_:1},8,["options","data","loading"])):(0,t.kq)("",!0),(0,t.Wm)(S,{ref_key:"nGoodsSelectRef",ref:L},null,512)])),_:1},8,["modelValue","title","loading"])}}};const Y=L;var E=Y},43469:function(e,a,l){l.r(a),l.d(a,{default:function(){return w}});var t=l(66252),u=l(2262),r=l(3577),i=l(24509),o=l(4984),n=l(61742),s=l(50361),p=l.n(s);const d={class:""},c=(0,t.Uk)("满减"),m=(0,t.Uk)("折扣"),v=(0,t.Uk)(" 元 ");var g={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:g,loading:f}=(0,o.F)({createDataApi:i.couponCreateApi,updateDataApi:i.couponEditApi}),w=(0,u.iH)(!1),b=(0,u.iH)(""),y=(0,u.iH)({name:"",type:0,value:0,total:0,min_price:0,start_time:null,end_time:null,order:0,desc:""}),h=(0,u.iH)([]),_=e=>{e||(e=[]),y.value.start_time=e[0],y.value.end_time=e[1]},D=({title:e,data:a})=>{b.value=e,a&&(y.value=p()({...a,value:parseFloat(a.value),min_price:parseFloat(a.min_price)})),h.value=[y.value.start_time,y.value.end_time],w.value=!0},k=(0,u.iH)(null),A=async()=>{k.value.validate((async e=>{if(e){const e={...y.value};e.start_time=new Date(e.start_time).getTime(),e.end_time=new Date(e.end_time).getTime(),y.value.id?await g({params:e,callback:()=>{w.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{w.value=!1,l.getListData&&l.getListData()}})}}))};return(0,t.YP)(w,(()=>{w.value||(y.value={name:"",type:0,value:0,total:0,min_price:0,start_time:null,end_time:null,order:0,desc:""})})),a({open:D}),(e,a)=>{const l=(0,t.up)("el-input"),i=(0,t.up)("el-form-item"),o=(0,t.up)("el-radio"),s=(0,t.up)("el-radio-group"),p=(0,t.up)("el-input-number"),g=(0,t.up)("el-date-picker"),D=(0,t.up)("el-form"),W=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(W,{modelValue:w.value,"onUpdate:modelValue":a[8]||(a[8]=e=>w.value=e),title:b.value,loading:(0,u.SU)(f),onConfirm:A,onCancel:a[9]||(a[9]=e=>w.value=!1)},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{ref_key:"formRef",ref:k,model:y.value,rules:(0,u.SU)(n["default"]),"label-width":"100px",size:"default"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"优惠券名称",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:y.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.name=e),placeholder:"请输入优惠券名称"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"密码",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:y.value.type,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.type=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{label:0,size:"small",border:""},{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(o,{label:1,size:"small",border:""},{default:(0,t.w5)((()=>[m])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:0===y.value.type?"面值":"打折",prop:"value"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"mr-2",modelValue:y.value.value,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value.value=e),min:0,precision:2},null,8,["modelValue"]),(0,t.Uk)(" "+(0,r.zw)(0===y.value.type?" 元":" 折"),1)])),_:1},8,["label"]),(0,t.Wm)(i,{label:"发行量",prop:"total"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:y.value.total,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value.total=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"最低使用价格",prop:"min_price"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"mr-2",modelValue:y.value.min_price,"onUpdate:modelValue":a[4]||(a[4]=e=>y.value.min_price=e),min:0,precision:2},null,8,["modelValue"]),v])),_:1}),(0,t.Wm)(i,{label:"排序",prop:"order"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:y.value.order,"onUpdate:modelValue":a[5]||(a[5]=e=>y.value.order=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"活动时间",prop:"end_time",class:"w-200"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=e=>h.value=e),type:"datetimerange","range-separator":"-","start-placeholder":"起始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"x",onChange:_},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"描述",prop:"desc"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:y.value.desc,"onUpdate:modelValue":a[7]||(a[7]=e=>y.value.desc=e),type:"textarea",rows:5,placeholder:"请输入优惠券描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","loading"])])}}};const f=g;var w=f},14645:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});var t=l(66252),u=l(2262),r=l(12190),i=l(49843),o=l(4984),n=l(50361),s=l.n(n);const p={class:""};var d={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:n,updateData:d,loading:c}=(0,o.F)({createDataApi:i.goodsCreateApi,updateDataApi:i.goodsEditApi}),m=(0,u.iH)(!1),v=(0,u.iH)([]),g=(0,u.iH)("");let f=null;(0,t.YP)(m,(()=>{m.value||(f=null)}));const w=e=>{v.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},b=({title:e,data:a})=>{if(v.value=(0,r.getActionSchema)().value,g.value=e,a){const e=s()(a);e.min_price=parseFloat(e.min_price),e.min_oprice=parseFloat(e.min_oprice),f=e,w(e)}m.value=!0},y=async e=>{f?await d({params:{...e,id:f.id},callback:()=>{m.value=!1,l.getListData&&l.getListData()}}):await n({params:e,callback:()=>{m.value=!1,l.getListData&&l.getListData()}})};return a({open:b}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(l,{visible:m.value,"onUpdate:visible":a[0]||(a[0]=e=>m.value=e),title:g.value,schema:v.value,loading:(0,u.SU)(c),formOptions:{labelWidth:"160px"},onSubmit:y},null,8,["visible","title","schema","loading"])])}}};const c=d;var m=c},64286:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(49843),i=l(26640),o=l(7599);const n={class:""};var s={__name:"SetBannerDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,s=(0,u.iH)(!1),p=(0,u.iH)(!1),d=(0,u.iH)("");let c=null;const m=(0,u.iH)([]);(0,t.YP)(s,(()=>{s.value||(c=null)}));const v=({title:e,data:a})=>{s.value=!0,d.value=e,c=a,m.value=a.goods_banner.map((e=>e.url))},g=async e=>{const{data:a}=await(0,i.uploadImageApi)({img:[e]});return a.url},f=async()=>{try{p.value=!0,await(0,r.goodsSetBannersApi)({id:c.id,banners:m.value}),(0,o.t6)({message:"轮播图设置完成",type:"success"})}finally{p.value=!1,s.value=!1,l.getListData&&l.getListData()}};return a({open:v}),(e,a)=>{const l=(0,t.up)("NUploadMultiple"),u=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(u,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value=e),title:d.value,loading:p.value,onCancel:a[2]||(a[2]=e=>s.value=!1),onConfirm:f},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),maxNum:5,customUpload:g},null,8,["modelValue"])])),_:1},8,["modelValue","title","loading"])])}}};const p=s;var d=p},43560:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});var t=l(66252),u=l(2262),r=l(49843),i=l(26640),o=l(7599),n=l(65567);const s={class:""};var p={__name:"SetContentDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,p=(0,u.iH)(!1),d=(0,u.iH)(!1),c=(0,u.iH)("");let m=null;const v=(0,u.iH)("");(0,t.YP)(p,(()=>{p.value||(m=null)}));const g=({title:e,data:a})=>{p.value=!0,c.value=e,m=a,v.value=a.content},f=async e=>{const{data:a}=await(0,i.uploadImageApi)({img:[e]});return a.url},w=async()=>{try{d.value=!0,await(0,r.goodsEditApi)({id:m.id,content:v.value}),(0,o.t6)({message:"商品详情设置完成",type:"success"})}finally{d.value=!1,p.value=!1,l.getListData&&l.getListData()}};return a({open:g}),(e,a)=>{const l=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(l,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),title:c.value,loading:d.value,onCancel:a[2]||(a[2]=e=>p.value=!1),onConfirm:w},{default:(0,t.w5)((()=>[(0,t.Wm)(n.Z,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),customUpload:f},null,8,["modelValue"])])),_:1},8,["modelValue","title","loading"])])}}};const d=p;var c=d},93098:function(e,a,l){l.r(a),l.d(a,{default:function(){return D}});var t=l(66252),u=l(3577),r=l(2262),i=l(49843),o=l(7599),n=l(21783),s=l(32752),p=l(50361),d=l.n(p);function c(){return Array.prototype.reduce.call(arguments,(function(e,a){var l=[];return e.forEach((function(e){a.forEach((function(a){l.push(e.concat([a]))}))})),l}),[[]])}const m=(0,t.Uk)("单规格"),v=(0,t.Uk)("多规格"),g=(0,t._)("span",{class:"ml-2"},"元",-1),f=(0,t._)("span",{class:"ml-2"},"元",-1),w=(0,t._)("span",{class:"ml-2"},"元",-1),b=(0,t._)("span",{class:"ml-2"},"公斤",-1),y=(0,t._)("span",{class:"ml-2"},"立方米",-1);var h={__name:"SetSkusDrawer",props:{getListData:{type:Function,default:null}},emits:["move"],setup(e,{expose:a,emit:l}){const p=e,h=(0,r.iH)(!1),_=(0,r.iH)(!1),D=(0,r.iH)(""),k=(0,r.iH)({sku_type:-1,sku_value:{oprice:0,pprice:0,cprice:0,weight:0,volume:0},goodsSkus:[{skus:[{goods_skus_card_id:"428",name:"尺寸",value:"XL",order:50,id:"1202",text:"XL"}],image:"",oprice:0,pprice:0,cprice:0,weight:0,volume:0,stock:0,code:"",goods_id:null}]}),A=(0,r.iH)([]),W=(0,r.iH)([]);let V=null,S=(0,r.iH)(null);(0,t.YP)(h,(()=>{h.value||(V=null,A.value=[],k.value.sku_type=-1)}));const U=async({title:e,data:a})=>{_.value=!0,S.value=a.id,await x(),h.value=!0,D.value=e,setTimeout((()=>{_.value=!1}),800)},x=()=>{const e={};e.id=S.value,(0,i.goodsInfoApi)(e).then((({data:e})=>{const a=e.sku_type;k.value.sku_type=e.sku_type,0===a?k.value.sku_value=e.sku_value||{}:(A.value=e.goodsSkusCard,W.value=F(A.value,e.goodsSkus)),V=e}))},H=(0,r.iH)(null),C=async()=>{try{_.value=!0,await(0,i.goodsSkuUpdateApi)({...k.value,id:V.id,goodsSkus:H.value&&H.value.getData()}),(0,o.t6)({message:"商品规格设置完成",type:"success"})}finally{_.value=!1,h.value=!1,p.getListData&&p.getListData()}},F=(e,a)=>{const l=[];d()(a).forEach((e=>{e._ids=Object.values(e.skus).map((e=>e.id)).join(","),l.push(e)}));const t=d()(e),u=t.map((e=>[...e.goodsSkusCardValue])).filter((e=>e.length>0)),r=c(...u),i=r.map((e=>{const a=e.map((e=>e.id)).join(",");if(a){const t=l.find((e=>e._ids===a));if(t)return t?._ids&&delete t["_ids"],t.skus=e,t}const t={image:""};return t._ids=a,t.pprice=0,t.oprice=0,t.cprice=0,t.stock=0,t.volume=0,t.weight=0,t.code="",t.goods_id=S.value,t.skus=e,t}));return i},L=()=>W.value;return a({open:U,getGoodsSkus:L,refreshGoodsSkus:F}),(e,a)=>{const l=(0,t.up)("el-radio"),i=(0,t.up)("el-radio-group"),o=(0,t.up)("el-form-item"),p=(0,t.up)("el-input-number"),d=(0,t.up)("el-form"),c=(0,t.up)("NDrawer"),V=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(c,{size:"70%",modelValue:h.value,"onUpdate:modelValue":a[7]||(a[7]=e=>h.value=e),title:D.value,loading:_.value,onCancel:a[8]||(a[8]=e=>h.value=!1),onConfirm:C},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",{class:(0,u.C_)({"h-screen":_.value})},[(0,t.Wm)(d,{ref:"formRef",model:k.value,"label-width":"80px"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"规格类型",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:k.value.sku_type,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.sku_type=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{label:0,border:""},{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(l,{label:1,border:""},{default:(0,t.w5)((()=>[v])),_:1})])),_:1},8,["modelValue"])])),_:1}),0===k.value.sku_type?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Wm)(o,{label:"市场价格",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:k.value.sku_value.oprice,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.sku_value.oprice=e),precision:2},null,8,["modelValue"]),g])),_:1}),(0,t.Wm)(o,{label:"销售价格",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:k.value.sku_value.pprice,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.sku_value.pprice=e),precision:2},null,8,["modelValue"]),f])),_:1}),(0,t.Wm)(o,{label:"成本价格",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:k.value.sku_value.cprice,"onUpdate:modelValue":a[3]||(a[3]=e=>k.value.sku_value.cprice=e),precision:2},null,8,["modelValue"]),w])),_:1}),(0,t.Wm)(o,{label:"商品重量",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:k.value.sku_value.weight,"onUpdate:modelValue":a[4]||(a[4]=e=>k.value.sku_value.weight=e),precision:2},null,8,["modelValue"]),b])),_:1}),(0,t.Wm)(o,{label:"商品体积",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:k.value.sku_value.volume,"onUpdate:modelValue":a[5]||(a[5]=e=>k.value.sku_value.volume=e),precision:2},null,8,["modelValue"]),y])),_:1})],64)):(0,t.kq)("",!0)])),_:1},8,["model"]),1===k.value.sku_type?((0,t.wg)(),(0,t.j4)(n["default"],{key:0,goodsSkus:A.value,"onUpdate:goodsSkus":a[6]||(a[6]=e=>A.value=e),onGetInfoData:x,goodsId:(0,r.SU)(S)},null,8,["goodsSkus","goodsId"])):(0,t.kq)("",!0),1===k.value.sku_type?((0,t.wg)(),(0,t.j4)(s["default"],{key:1,class:"mt-6",ref_key:"skuTableRef",ref:H,goodsSkusCard:A.value,goodsSkus:W.value},null,8,["goodsSkusCard","goodsSkus"])):(0,t.kq)("",!0)],2)),[[V,_.value]])])),_:1},8,["modelValue","title","loading"])])}}};const _=h;var D=_},21783:function(e,a,l){l.r(a),l.d(a,{default:function(){return I}});var t=l(66252),u=l(49963),r=l(3577),i=l(2262),o=l(42634),n=l(35856),s=l(50361),p=l.n(s),d=l(7599),c=l(25948),m=(l(96344),l(4984));const v=e=>((0,t.dD)("data-v-1f6136ac"),e=e(),(0,t.Cn)(),e),g={class:"fixed left-0 top-0 right-0 bottom-0 flex items-center justify-center bg-black/50 z-index-9999"},f={class:"w-1200px h-600px bg-white p-10 rounded-2px"},w=v((()=>(0,t._)("div",{class:"relative -top-14px text-xl"},"选择规格",-1))),b={class:"content mt-4"},y=["onClick"],h={class:"select-content"},_={class:"page-wrap"},D={class:"slider-page ml-14"},k=(0,t.Uk)("取消"),A=(0,t.Uk)("确定");var W={__name:"index",props:{},emits:["select"],setup(e,{expose:a,emit:l}){const o=(0,i.iH)(!1),n=(0,i.iH)(!1),s=(0,i.iH)(null),p=(0,i.iH)([]),{loading:d,list:v,pageSearch:W,total:V,getListData:S,deleteData:U,statusData:x}=(0,m.F)({listDataApi:c.skuListApi,deleteDataApi:e=>(0,c.skuDeleteApi)({ids:[e.id]}),statusDataApi:c.skuStatusApi}),H=(0,t.Fl)((()=>s.value?s.value.default.split(","):[]));let C=null;const F=e=>{C=e,S().then((e=>{s.value=v.value?.[0]||null,o.value=!0}))},L=e=>{s.value=e,p.value=[]},Y=e=>{const a=p.value.findIndex((a=>a===e));-1===a?p.value.push(e):p.value.splice(a,1)},E=()=>{},z=()=>{},T=()=>{const e={};e.name=s.value.name,e.value=[...p.value],C&&e.value.length>0&&C&&C(e),o.value=!1};return(0,t.YP)(o,(()=>{o.value||(s.value=null,p.value=[],C=null)})),a({open:F}),(e,a)=>{const l=(0,t.up)("el-scrollbar"),d=(0,t.up)("el-card"),c=(0,t.up)("el-button"),m=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.j4)(t.lR,{to:"body"},[(0,t.wy)((0,t._)("div",g,[(0,t._)("div",f,[w,(0,t._)("div",b,[(0,t.wy)(((0,t.wg)(),(0,t.j4)(d,{class:"select-slider","body-style":{padding:0},shadow:"never"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,i.SU)(v),(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.id,onClick:a=>L(e),class:(0,r.C_)(["slider-item",{active:s.value?.id===e.id}])},[(0,t._)("span",null,(0,r.zw)(e.name),1)],10,y)))),128))])),_:1})])),_:1})),[[m,n.value]]),(0,t.Wm)(l,{height:"448px"},{default:(0,t.w5)((()=>[(0,t._)("div",h,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,i.SU)(H),((e,a)=>((0,t.wg)(),(0,t.j4)(d,{class:(0,r.C_)(["item",{selected:p.value.find((a=>a===e))}]),onClick:a=>Y(e),"body-style":{padding:0},shadow:"never",key:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(e),1)])),_:2},1032,["class","onClick"])))),128))])])),_:1})]),(0,t._)("div",_,[(0,t._)("div",D,[(0,t.Wm)(c,{type:"primary",plain:"",icon:"el-icon-arrowLeft",onClick:a[0]||(a[0]=e=>E(-1))}),(0,t.Wm)(c,{type:"primary",plain:"",icon:"el-icon-arrowRight",onClick:a[1]||(a[1]=e=>z(1))})]),(0,t._)("div",null,[(0,t.Wm)(c,{onClick:a[2]||(a[2]=e=>o.value=!1)},{default:(0,t.w5)((()=>[k])),_:1}),(0,t.Wm)(c,{type:"primary",onClick:T},{default:(0,t.w5)((()=>[A])),_:1})])])])],512),[[u.F8,o.value]])])}}},V=l(83744);const S=(0,V.Z)(W,[["__scopeId","data-v-1f6136ac"]]);var U=S;const x={class:"p-4 py-4 bg-gray-200/80 dark:bg-black/30"},H=["onClick"],C={class:"float-right"},F={class:"p-4 pb-0 flex flex-wrap"},L={class:"w-10 pl-1"},Y=(0,t.Uk)("+ 添加值"),E=(0,t.Uk)("+ 新增规格");var z={__name:"SkuCard",props:{goodsId:{type:Number,default:null},goodsSkus:{type:Array,default:()=>[]}},emits:["get-info-data"],setup(e,{emit:a}){const l=e,s=(0,i.iH)([]),c=(0,i.iH)(null),m=(0,i.iH)(""),v=(0,i.iH)(null),g=(0,i.iH)(!1),f=e=>{c.value=e,c.value.isEdit=!0,(0,t.Y3)((()=>v.value[0].focus()))},w=async()=>{const e=m.value.trim();if(e)try{g.value=!0;const e={};e.goods_skus_card_id=c.value.id,e.name=c.value.name,e.order=50,e.value=m.value,await(0,o.goodsSkuValCreateApi)(e),a("get-info-data"),(0,d.yw)({message:"添加完成"})}finally{g.value=!1}c.value&&(c.value.isEdit=!1),c.value=null,m.value=""},b=async e=>{const l={id:e.id};try{g.value=!0,await(0,o.goodsSkuValDeleteApi)(l),a("get-info-data"),(0,d.yw)({message:"已删除"})}finally{g.value=!1}},y=async()=>{const e=s.value?.length>0?s.value[s.value.length-1].order+1:50,t={goods_id:l.goodsId,name:"规格名称",order:e,type:0};try{g.value=!0,await(0,n.goodsSkuCreateApi)(t),a("get-info-data"),(0,d.yw)({message:"新增规格完成"})}finally{g.value=!1}},h=async e=>{try{g.value=!0,await(0,n.goodsSkuDeleteApi)({id:e.id}),a("get-info-data"),(0,d.yw)({message:"已删除"})}finally{g.value=!1}},_=async(e,l)=>{const t=l-1;if(-1===t)return;const u={},r=p()(s.value),i=r.splice(l,1)[0];r.splice(t,0,i),u.sortdata=r.map(((e,a)=>{const l={};return l.id=e.id,l.order=a+1,l}));try{g.value=!0,await(0,n.goodsSkuSortApi)(u),a("get-info-data"),(0,d.yw)({message:"完成排序"})}finally{g.value=!1}},D=async(e,l)=>{const t=l+1;if(t>=s.value.length)return;const u={},r=p()(s.value),i=r.splice(l,1)[0];r.splice(t,0,i),u.sortdata=r.map(((e,a)=>{const l={};return l.id=e.id,l.order=a+1,l}));try{g.value=!0,await(0,n.goodsSkuSortApi)(u),a("get-info-data"),(0,d.yw)({message:"完成排序"})}finally{g.value=!1}},k=async e=>{const t=l.goodsSkus.find((a=>a.id===e.id)),u=t.name,r=e.name;if(u!=r){const l={};l.goods_id=e.goods_id,l.id=e.id,l.name=r,l.order=e.order,l.type=0;try{g.value=!0,await(0,n.goodsSkuEditApi)(l),a("get-info-data"),(0,d.yw)({message:"完成修改"})}finally{g.value=!1}}},A=async(e,t)=>{const u=l.goodsSkus.find((e=>e.id===t.id)),r=u.goodsSkusCardValue.find((a=>a.id===e.id)),i=r.value,n=e.value;if(i!==n){const l={};l.id=e.id,l.goods_skus_card_id=t.id,l.name=t.name,l.order=t.order,l.value=e.value;try{g.value=!0,await(0,o.goodsSkuValEditApi)(l),a("get-info-data"),(0,d.yw)({message:"完成修改"})}finally{g.value=!1}}},W=(0,i.iH)(null),V=e=>{W.value.open((async l=>{l.id=e.id,await(0,n.goodsSkuSetApi)(l),a("get-info-data"),(0,d.yw)({message:"完成修改"})}))};return(0,t.YP)((()=>l.goodsSkus),(()=>{s.value=p()(l.goodsSkus)}),{immediate:!0}),(e,a)=>{const l=(0,t.up)("NIcon"),i=(0,t.up)("el-input"),o=(0,t.up)("el-tag"),n=(0,t.up)("el-button"),p=(0,t.Q2)("loading");return(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.value,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"el-card mb-6",key:e.id},[(0,t._)("div",x,[(0,t.Wm)(i,{class:"w-70 m-0",size:"small",modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,onBlur:a=>k(e),onKeyup:(0,u.D2)((a=>k(e)),["enter"])},{append:(0,t.w5)((()=>[(0,t._)("div",{onClick:a=>V(e),class:"px-20px h-100% cursor-pointer"},[(0,t.Wm)(l,{icon:"more",color:"black",class:"mt-1 !dark:text-white"})],8,H)])),_:2},1032,["modelValue","onUpdate:modelValue","onBlur","onKeyup"]),(0,t._)("div",C,[(0,t.Wm)(l,{icon:"top",color:"black",class:(0,r.C_)(["cursor-pointer mt-4px",{"opacity-60 cursor-not-allowed":0===n}]),onClick:(0,u.iM)((a=>_(e,n)),["stop"])},null,8,["class","onClick"]),(0,t.Wm)(l,{icon:"bottom",color:"black",class:(0,r.C_)(["cursor-pointer mt-4px mx-8px",{"opacity-60 cursor-not-allowed":n>=s.value.length-1}]),onClick:(0,u.iM)((a=>D(e,n)),["stop"])},null,8,["class","onClick"]),(0,t.Wm)(l,{icon:"delete",color:"black",class:"cursor-pointer mt-4px",onClick:(0,u.iM)((a=>h(e)),["stop"])},null,8,["onClick"])])]),(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",F,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.goodsSkusCardValue,(a=>((0,t.wg)(),(0,t.iD)(t.HY,{key:a.id},[(0,t.Wm)(i,{class:"w-60 m-0 mb-4",size:"small",modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onBlur:l=>A(a,e),onKeyup:(0,u.D2)((l=>A(a,e)),["enter"])},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"]),(0,t._)("div",L,[(0,t.Wm)(l,{icon:"close",color:"black",class:"cursor-pointer mt-1",onClick:(0,u.iM)((e=>b(a)),["stop"])},null,8,["onClick"])])],64)))),128)),e.isEdit?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(o,{key:0,type:"success",size:"small",effect:"light",class:"w-30 h-9 mb-4",onClick:a=>f(e)},{default:(0,t.w5)((()=>[Y])),_:2},1032,["onClick"])),e.isEdit?((0,t.wg)(),(0,t.j4)(i,{key:1,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),ref_for:!0,ref_key:"tagInputRef",ref:v,class:"w-30 h-9 mb-4",size:"small",onBlur:w,onKeyup:(0,u.D2)(w,["enter"])},null,8,["modelValue","onKeyup"])):(0,t.kq)("",!0)])),[[p,g.value]])])))),128)),(0,t.Wm)(n,{type:"success",size:"small",onClick:y},{default:(0,t.w5)((()=>[E])),_:1}),(0,t.Wm)(U,{ref_key:"nSkusSelectRef",ref:W},null,512)])),[[p,g.value]])}}};const T=(0,V.Z)(z,[["__scopeId","data-v-106293f9"]]);var I=T},32752:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});var t=l(66252),u=l(2262),r=l(3577),i=l(50361),o=l.n(i),n=l(78718),s=l.n(n),p={__name:"SkuTable",props:{goodsSkusCard:{type:Array,default:()=>[]},goodsSkus:{type:Array,default:()=>[]}},setup(e,{expose:a}){const l=e,i=(0,u.iH)([]);(0,t.YP)((()=>l.goodsSkus),(()=>{i.value=o()(l.goodsSkus).map((e=>({...e,pprice:parseFloat(e.pprice),oprice:parseFloat(e.oprice),cprice:parseFloat(e.cprice),stock:parseFloat(e.stock),volume:parseFloat(e.volume),weight:parseFloat(e.weight)})))}),{immediate:!0});const n=(0,t.Fl)((()=>0===l.goodsSkusCard.length?[]:o()(l.goodsSkusCard).map((e=>e.name)))),p=()=>i.value.map((e=>s()(e,["pprice","oprice","cprice","stock","volume","weight","code","goods_id","image","skus"])));return a({getData:p}),(e,a)=>{const l=(0,t.up)("el-table-column"),o=(0,t.up)("el-input-number"),s=(0,t.up)("el-input"),p=(0,t.up)("el-table");return i.value.length>0?((0,t.wg)(),(0,t.j4)(p,{key:0,data:i.value,style:{width:"100%"},size:"small","table-layout":"auto"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{label:"商品规格",fixed:"",align:"center"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,u.SU)(n),((e,a)=>((0,t.wg)(),(0,t.j4)(l,{label:e,"min-width":"80px",fixed:"",align:"center",key:a},{default:(0,t.w5)((({row:e})=>[(0,t._)("span",null,(0,r.zw)(e.skus[a]?.value||"-"),1)])),_:2},1032,["label"])))),128))])),_:1}),(0,t.Wm)(l,{align:"center",prop:"pprice",label:"销售价"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(o,{size:"small",modelValue:e.pprice,"onUpdate:modelValue":a=>e.pprice=a,min:0,precision:2},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(l,{align:"center",prop:"oprice",label:"市场价"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(o,{size:"small",modelValue:e.oprice,"onUpdate:modelValue":a=>e.oprice=a,min:0,precision:2},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(l,{align:"center",prop:"cprice",label:"成本价"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(o,{size:"small",modelValue:e.cprice,"onUpdate:modelValue":a=>e.cprice=a,min:0,precision:2},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(l,{align:"center",prop:"stock",label:"库存"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(o,{size:"small",modelValue:e.stock,"onUpdate:modelValue":a=>e.stock=a,min:0},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(l,{align:"center",prop:"volume",label:"体积"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(o,{size:"small",modelValue:e.volume,"onUpdate:modelValue":a=>e.volume=a,min:0},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(l,{align:"center",prop:"weight",label:"重量"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(o,{size:"small",modelValue:e.weight,"onUpdate:modelValue":a=>e.weight=a,min:0},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(l,{align:"center",prop:"code",label:"编码"},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(s,{class:"w-30",size:"small",modelValue:e.code,"onUpdate:modelValue":a=>e.code=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])):(0,t.kq)("",!0)}}};const d=p;var c=d},9648:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});var t=l(66252),u=l(2262),r=l(50578),i=l(25948),o=l(7599),n=l(50361),s=l.n(n),p={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,n=(0,u.iH)(!1),p=(0,u.iH)(""),d=(0,u.iH)({name:"",order:0,status:1,default:""}),c=(0,u.iH)([]),m=(0,u.iH)(!1),v=({title:e,data:a})=>{p.value=e,a&&(d.value=s()(a),c.value=a.default.split(",")),n.value=!0},g=async()=>{m.value=!0;try{const e={...d.value,default:c.value.join(",")};e.id?(await(0,i.skuEditApi)(e),n.value=!1,(0,o.t6)({message:"编辑成功",type:"success"}),l.getListData&&l.getListData()):(await(0,i.skuCreateApi)(e),n.value=!1,l.getListData&&l.getListData(),(0,o.t6)({message:"新增成功",type:"success"}))}finally{m.value=!1}},f=()=>{n.value=!1};return(0,t.YP)(c,(()=>{d.value.default=c.value.join(",")})),(0,t.YP)(n,(()=>{n.value||(d.value={name:"",order:0,status:1,default:""},c.value=[])})),a({open:v}),(e,a)=>{const l=(0,t.up)("el-input"),i=(0,t.up)("el-form-item"),o=(0,t.up)("el-input-number"),s=(0,t.up)("el-switch"),v=(0,t.up)("NEditTag"),w=(0,t.up)("el-form"),b=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.j4)(b,{modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value=e),loading:m.value,title:p.value,onConfirm:g,onCancel:f},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{ref:"formRef",model:d.value,rules:(0,u.SU)(r["default"]),"label-width":"80px",size:"default"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"规格名称",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:d.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value.name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"排序",prop:"order"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{modelValue:d.value.order,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value.order=e),min:0,max:1e3},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"状态",prop:"status"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:d.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value.status=e),"active-value":1,"inactive-value":0,min:0,max:1e3},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"规格值",prop:"default"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","loading","title"])}}};const d=p;var c=d},71307:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(70002),i=l(71595),o=l(4984);const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:p,loading:d}=(0,o.F)({createDataApi:i.noticeCreateApi,updateDataApi:i.noticeEditApi}),c=(0,u.iH)(!1),m=(0,u.iH)([]),v=(0,u.iH)("");let g=null;(0,t.YP)(c,(()=>{c.value||(g=null)}));const f=e=>{m.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},w=({title:e,data:a})=>{m.value=(0,r.getActionSchema)().value,v.value=e,a&&(g=a,f(a)),c.value=!0},b=async e=>{g?await p({params:{...e,id:g.id},callback:()=>{c.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{c.value=!1,l.getListData&&l.getListData()}})};return a({open:w}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:c.value,"onUpdate:visible":a[0]||(a[0]=e=>c.value=e),title:v.value,schema:m.value,loading:(0,u.SU)(d),formOptions:{labelWidth:"100px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p},37964:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(66252),u=l(3577);const r={class:"common-header-left"},i={class:"common-header-logo"},o=["alt"],n={class:"common-header-title"},s={class:"common-header-right"},p=(0,t.Uk)("返回登录"),d={class:"common-container"},c={class:"common-title"},m={class:"common-main el-card"};function v(e,a,l,v,g,f){const w=(0,t.up)("router-link"),b=(0,t.up)("el-header"),y=(0,t.up)("el-main"),h=(0,t.up)("el-container");return(0,t.wg)(),(0,t.j4)(h,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{style:{height:"50px"}},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",i,[(0,t._)("img",{alt:e.$CONFIG.APP_NAME,src:"img/logo.png"},null,8,o),(0,t._)("label",null,(0,u.zw)(e.$CONFIG.APP_NAME),1)]),(0,t._)("div",n,(0,u.zw)(l.title),1)]),(0,t._)("div",s,[(0,t.Wm)(w,{to:"/login"},{default:(0,t.w5)((()=>[p])),_:1})])])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t._)("h2",c,(0,u.zw)(l.title),1),(0,t._)("div",m,[(0,t.WI)(e.$slots,"default")])])])),_:3})])),_:3})}var g={props:{title:{type:String,default:""}}},f=l(83744);const w=(0,f.Z)(g,[["render",v]]);var b=w},59376:function(e,a,l){l.r(a),l.d(a,{default:function(){return s}});var t=l(66252),u=l(3577);function r(e,a,l,r,i,o){const n=(0,t.up)("el-input"),s=(0,t.up)("el-form-item"),p=(0,t.up)("el-checkbox"),d=(0,t.up)("el-col"),c=(0,t.up)("el-button"),m=(0,t.up)("el-form");return(0,t.wg)(),(0,t.j4)(m,{ref:"loginForm",model:i.form,rules:i.rules,"label-width":"0",size:"large"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{prop:"user"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:i.form.user,"onUpdate:modelValue":a[0]||(a[0]=e=>i.form.user=e),"prefix-icon":"el-icon-user",clearable:"",placeholder:e.$t("login.userPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,t.Wm)(s,{prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:i.form.password,"onUpdate:modelValue":a[1]||(a[1]=e=>i.form.password=e),"prefix-icon":"el-icon-lock",clearable:"","show-password":"",placeholder:e.$t("login.PWPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,t.Wm)(s,{style:{"margin-bottom":"10px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:12},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:e.$t("login.rememberMe"),modelValue:i.form.autologin,"onUpdate:modelValue":a[2]||(a[2]=e=>i.form.autologin=e)},null,8,["label","modelValue"])])),_:1})])),_:1}),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{type:"primary",style:{width:"100%"},loading:i.islogin,round:"",onClick:o.login},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])}var i={data(){return{userType:"",form:{user:"admin",password:"admin",autologin:!1},rules:{user:[{required:!0,message:this.$t("login.userError"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.PWError"),trigger:"blur"}]},islogin:!1}},watch:{userType(e){"admin"==e?(this.form.user="admin",this.form.password="admin"):"user"==e&&(this.form.user="user",this.form.password="user")}},mounted(){},methods:{async login(){const e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1;this.islogin=!0;const a={username:this.form.user,password:this.form.password},l=await this.$API.auth.loginApi(a);if(!l.data.token)return this.islogin=!1,this.$message.warning(l.message),!1;{this.$TOOL.cookie.set("TOKEN",l.data.token,{expires:this.form.autologin?86400:0});const{data:e}=await this.$API.auth.userInfoApi();this.$TOOL.data.set("USER_INFO",e);let a=e.menus,t=e.ruleNames;this.$TOOL.data.set("MENU",a),this.$TOOL.data.set("PERMISSIONS",t),this.$router.replace({path:"/"}),this.$message.success("Login Success 登录成功"),this.islogin=!1}}}},o=l(83744);const n=(0,o.Z)(i,[["render",r]]);var s=n},6301:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});var t=l(66252),u=l(3577);const r=(0,t.Uk)("+86"),i={class:"login-msg-yzm"},o={key:0},n={class:"login-reg"};function s(e,a,l,s,p,d){const c=(0,t.up)("el-input"),m=(0,t.up)("el-form-item"),v=(0,t.up)("el-button"),g=(0,t.up)("router-link"),f=(0,t.up)("el-form");return(0,t.wg)(),(0,t.j4)(f,{ref:"loginForm",model:p.form,rules:p.rules,"label-width":"0",size:"large"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{prop:"phone"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:p.form.phone,"onUpdate:modelValue":a[0]||(a[0]=e=>p.form.phone=e),"prefix-icon":"el-icon-iphone",clearable:"",placeholder:e.$t("login.mobilePlaceholder")},{prepend:(0,t.w5)((()=>[r])),_:1},8,["modelValue","placeholder"])])),_:1}),(0,t.Wm)(m,{prop:"yzm",style:{"margin-bottom":"35px"}},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(c,{modelValue:p.form.yzm,"onUpdate:modelValue":a[1]||(a[1]=e=>p.form.yzm=e),"prefix-icon":"el-icon-unlock",clearable:"",placeholder:e.$t("login.smsPlaceholder")},null,8,["modelValue","placeholder"]),(0,t.Wm)(v,{onClick:d.getYzm,disabled:p.disabled},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(this.$t("login.smsGet")),1),p.disabled?((0,t.wg)(),(0,t.iD)("span",o," ("+(0,u.zw)(p.time)+")",1)):(0,t.kq)("",!0)])),_:1},8,["onClick","disabled"])])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{type:"primary",style:{width:"100%"},loading:p.islogin,round:"",onClick:d.login},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1}),(0,t._)("div",n,[(0,t.Uk)((0,u.zw)(e.$t("login.noAccount"))+" ",1),(0,t.Wm)(g,{to:"/user_register"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("login.createAccount")),1)])),_:1})])])),_:1},8,["model","rules"])}var p={data(){return{form:{phone:"",yzm:""},rules:{phone:[{required:!0,message:this.$t("login.mobileError")}],yzm:[{required:!0,message:this.$t("login.smsError")}]},disabled:!1,time:0,islogin:!1}},mounted(){},methods:{async getYzm(){var e=await this.$refs.loginForm.validateField("phone").catch((()=>{}));if(!e)return!1;this.$message.success(this.$t("login.smsSent")),this.disabled=!0,this.time=60;var a=setInterval((()=>{this.time-=1,this.time<1&&(clearInterval(a),this.disabled=!1,this.time=0)}),1e3)},async login(){var e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1}}},d=l(83744);const c=(0,d.Z)(p,[["render",s]]);var m=c},16563:function(e,a,l){l.r(a),l.d(a,{default:function(){return v}});var t=l(66252),u=l(2262),r=l(19560),i=l(7599),o=l(72294),n=l(50361),s=l.n(n);const p=(0,t.Uk)("菜单"),d=(0,t.Uk)("规则");var c={__name:"ActionDrawer",props:{getListData:{type:Function,default:null},ruleList:{type:Array,default:()=>[]}},setup(e,{expose:a}){const l=e,n=((0,u.iH)([]),(0,u.iH)({rule_id:null,menu:1,name:"",condition:"",method:"",status:1,order:0,icon:"",frontpath:""})),c=(0,t.Fl)((()=>1===n.value.menu?o.menuRules:o.ruleRules)),m=(0,u.iH)(null),v=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],g=()=>{n.value={...n.value,rule_id:n.value.rule_id,menu:n.value.menu,name:"",condition:"",method:"",status:1,order:0,icon:"",frontpath:""},["name","condition","method","order","frontpath"].forEach((e=>{m.value.clearValidate(e)}))},f=(0,u.iH)(!1),w=(0,u.iH)(!1),b=(0,u.iH)("");(0,t.YP)(f,(()=>{f.value||(n.value={rule_id:null,menu:1,name:"",condition:"",method:"",status:1,order:0,icon:"",frontpath:""})}));const y=({title:e,data:a})=>{if(b.value=e,a){const e={...s()(a),child:void 0};n.value={...n.value,...e}}console.log(2),f.value=!0},h=()=>{f.value=!1},_=async()=>{m.value.validate((async e=>{if(e){w.value=!0;try{let e=null;e=Array.isArray(n.value.rule_id)?[...n.value.rule_id].pop():n.value.rule_id,n.value.id&&0!==n.value.id?(await(0,r.ruleUpdateApi)({...n.value,rule_id:e}),(0,i.t6)({message:"编辑成功",type:"success"})):(await(0,r.ruleCreateApi)({...n.value,rule_id:e}),(0,i.t6)({message:"新增成功",type:"success"}))}finally{w.value=!1,f.value=!1,l.getListData&&l.getListData()}}}))};return a({open:y}),(a,l)=>{const r=(0,t.up)("el-cascader"),i=(0,t.up)("el-form-item"),o=(0,t.up)("el-radio"),s=(0,t.up)("el-radio-group"),y=(0,t.up)("el-input"),D=(0,t.up)("el-option"),k=(0,t.up)("el-select"),A=(0,t.up)("el-input-number"),W=(0,t.up)("el-form"),V=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.j4)(V,{modelValue:f.value,"onUpdate:modelValue":l[8]||(l[8]=e=>f.value=e),title:b.value,loading:w.value,onCancel:h,onConfirm:_},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{ref_key:"formRef",ref:m,model:n.value,rules:(0,u.SU)(c),"validate-on-rule-change":!1,"label-width":"120px",size:"default"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"上级菜单",prop:"rule_id"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:n.value.rule_id,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value.rule_id=e),options:e.ruleList,props:{checkStrictly:!0,label:"name",value:"id",children:"child"},clearable:"",placeholder:"请选择上级菜单"},null,8,["modelValue","options"])])),_:1}),(0,t.Wm)(i,{label:"菜单/规则",prop:"menu"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:n.value.menu,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value.menu=e),onChange:g},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{label:1,size:"large",border:""},{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(o,{label:0,size:"large",border:""},{default:(0,t.w5)((()=>[d])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"名称",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:n.value.name,"onUpdate:modelValue":l[2]||(l[2]=e=>n.value.name=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),0===n.value.menu?((0,t.wg)(),(0,t.j4)(i,{key:0,label:"后端规则",prop:"condition"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:n.value.condition,"onUpdate:modelValue":l[3]||(l[3]=e=>n.value.condition=e),placeholder:"请输入后端规则"},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),0===n.value.menu?((0,t.wg)(),(0,t.j4)(i,{key:1,label:"请求方式",prop:"method"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:n.value.method,"onUpdate:modelValue":l[4]||(l[4]=e=>n.value.method=e),placeholder:"请选择请求方式"},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(v,(e=>(0,t.Wm)(D,{key:e.label,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(i,{label:"菜单图标",prop:"icon"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:n.value.icon,"onUpdate:modelValue":l[5]||(l[5]=e=>n.value.icon=e)},null,8,["modelValue"])])),_:1}),1===n.value.menu?((0,t.wg)(),(0,t.j4)(i,{key:2,label:"前端路由规则",prop:"frontpath"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:n.value.frontpath,"onUpdate:modelValue":l[6]||(l[6]=e=>n.value.frontpath=e),placeholder:"请输入前端路由规则"},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(i,{label:"排序",prop:"order"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:n.value.order,"onUpdate:modelValue":l[7]||(l[7]=e=>n.value.order=e),min:0,max:1e3},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","loading"])}}};const m=c;var v=m},88456:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(30871),i=l(91056),o=l(4984);const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:p,loading:d}=(0,o.F)({createDataApi:i.managerCreateApi,updateDataApi:i.managerEditApi}),c=(0,u.iH)(!1),m=(0,u.iH)([]),v=(0,u.iH)("");let g=null;(0,t.YP)(c,(()=>{c.value||(g=null)}));const f=e=>{m.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},w=({title:e,data:a})=>{if(m.value=(0,r.getActionSchema)().value,v.value=e,a){g=a;const e=m.value.findIndex((e=>"password"===e.prop));m.value.splice(e,1),f(a)}c.value=!0},b=async e=>{g?await p({params:{...e,id:g.id},callback:()=>{c.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{c.value=!1,l.getListData&&l.getListData()}})};return a({open:w}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:c.value,"onUpdate:visible":a[0]||(a[0]=e=>c.value=e),title:v.value,schema:m.value,loading:(0,u.SU)(d),formOptions:{labelWidth:"100px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p},81736:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(16244),i=l(38208),o=l(4984);const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:p,loading:d}=(0,o.F)({createDataApi:i.roleCreateApi,updateDataApi:i.roleEditApi}),c=(0,u.iH)(!1),m=(0,u.iH)([]),v=(0,u.iH)("");let g=null;(0,t.YP)(c,(()=>{c.value||(g=null)}));const f=e=>{m.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},w=({title:e,data:a})=>{m.value=(0,r.getActionSchema)().value,v.value=e,a&&(g=a,f(a)),c.value=!0},b=async e=>{g?await p({params:{...e,id:g.id},callback:()=>{c.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{c.value=!1,l.getListData&&l.getListData()}})};return a({open:w}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:c.value,"onUpdate:visible":a[0]||(a[0]=e=>c.value=e),title:v.value,schema:m.value,loading:(0,u.SU)(d),formOptions:{labelWidth:"100px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p},7418:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});var t=l(66252),u=l(2262),r=l(3577),i=l(38208),o=l(19560),n=l(7599);const s=(0,t.Uk)("菜单"),p=(0,t.Uk)("权限");var d={__name:"SetPermissionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,d=(0,t.Fl)((()=>window.innerHeight)),c={value:"id",children:"child",label:"name"},m=(0,u.iH)(!1),v=(0,u.iH)(!1),g=(0,u.iH)([]),f=(0,u.iH)([]),w=async()=>{m.value=!0;const{data:e}=await(0,o.ruleListApi)();g.value=e.list,f.value=e.list.map((e=>e.id)),m.value=!1},b=(0,u.iH)(!1),y=(0,u.iH)("");let h=null;(0,t.YP)(b,(()=>{b.value||(h=null)}));const _=(0,u.iH)(null);let D=[];const k=async({title:e,data:a})=>{y.value=e,h=a,await w(),b.value=!0,setTimeout((()=>{D=a.rules.map((e=>e.id)),_.value.setCheckedKeys(D)}))},A=()=>{b.value=!1},W=(e,a)=>{D=a.checkedKeys},V=async()=>{try{v.value=!0,await(0,i.roleSetApi)({id:h.id,rule_ids:D}),l.getListData&&await l.getListData(),(0,n.t6)({message:"修改完成",type:"success"})}finally{v.value=!1,b.value=!1}};return a({open:k}),(e,a)=>{const l=(0,t.up)("el-tag"),i=(0,t.up)("el-tree-v2"),o=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.j4)(o,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),loading:v.value,onConfirm:V,onCancel:A},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{ref_key:"treeRef",ref:_,loading:m.value,data:g.value,props:c,"show-checkbox":"",onCheck:W,"default-expanded-keys":f.value,"check-strictly":!1,height:(0,u.SU)(d)},{default:(0,t.w5)((({node:e,data:a})=>[1===a.menu?((0,t.wg)(),(0,t.j4)(l,{key:0,class:"mr-2",size:"small",effect:"light","disable-transitions":""},{default:(0,t.w5)((()=>[s])),_:1})):((0,t.wg)(),(0,t.j4)(l,{key:1,type:"info",class:"mr-2",size:"small",effect:"light","disable-transitions":""},{default:(0,t.w5)((()=>[p])),_:1})),(0,t._)("span",null,(0,r.zw)(a.name),1)])),_:1},8,["loading","data","default-expanded-keys","height"])])),_:1},8,["modelValue","loading"])}}};const c=d;var m=c},39795:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(67180),i=l(56868),o=l(4984);const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:p,loading:d}=(0,o.F)({createDataApi:i.userCreateApi,updateDataApi:i.userEditApi}),c=(0,u.iH)(!1),m=(0,u.iH)([]),v=(0,u.iH)("");let g=null;(0,t.YP)(c,(()=>{c.value||(g=null)}));const f=e=>{m.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},w=({title:e,data:a})=>{if(m.value=(0,r.getActionSchema)().value,v.value=e,a){g=a;const e=m.value.findIndex((e=>"password"===e.prop));m.value.splice(e,1),f(a)}c.value=!0},b=async e=>{g?await p({params:{...e,id:g.id},callback:()=>{c.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{c.value=!1,l.getListData&&l.getListData()}})};return a({open:w}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:c.value,"onUpdate:visible":a[0]||(a[0]=e=>c.value=e),title:v.value,schema:m.value,loading:(0,u.SU)(d),formOptions:{labelWidth:"100px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p},68022:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(10128),i=l(93067),o=(l(4984),l(7599));const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,s=(0,u.iH)(!1),p=(0,u.iH)(!1),d=(0,u.iH)([]),c=(0,u.iH)("");let m=null;(0,t.YP)(s,(()=>{s.value||(m=null)}));const v=e=>{d.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},g=({title:e,data:a})=>{d.value=(0,r.getActionSchema)().value,c.value=e,console.log(a,"daa"),m=a,a&&v(a),s.value=!0},f=async e=>{try{p.value=!0,await(0,i.orderShipApi)({id:m.id,...e}),(0,o.t6)({message:"提交成功",type:"success"}),l.getListData&&l.getListData()}finally{p.value=!1,s.value=!1}};return a({open:g}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:s.value,"onUpdate:visible":a[0]||(a[0]=e=>s.value=e),title:c.value,schema:d.value,loading:p.value,formOptions:{labelWidth:"100px"},onSubmit:f},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p},2973:function(e,a,l){l.r(a),l.d(a,{default:function(){return _}});var t=l(66252),u=l(2262),r=l(3577),i=l(56868),o=l(4984),n=l(46377),s=l(41218);const p={class:""},d={class:"flex"},c={class:"mb-2 text-12px"},m={class:"mt-2"},v={class:"text-red-500"},g={class:"ml-2 text-sm text-gray-400"},f={class:"mt-4"},w=(0,t._)("span",null,"成交价",-1),b={class:"ml-4 text-red-500"};var y={__name:"OrderInfoDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:y,updateData:h,loading:_}=(0,o.F)({createDataApi:i.userCreateApi,updateDataApi:i.userEditApi}),D=(0,u.iH)(!1),k=(0,u.iH)("");let A=(0,u.iH)(null);(0,t.YP)(D,(()=>{D.value||(A.value=null)}));const W=({title:e,data:a})=>{k.value=e,A.value=a,D.value=!0},V=async e=>{A.value?await h({params:{...e,id:A.value.id},callback:()=>{D.value=!1,l.getListData&&l.getListData()}}):await y({params:e,callback:()=>{D.value=!1,l.getListData&&l.getListData()}})},S=()=>{const e=(0,s.WJ)(1e3*A.value.paid_time,"YYYY-MM-DD HH:mm:ss");return e.value};return a({open:W}),(e,a)=>{const l=(0,t.up)("el-form-item"),i=(0,t.up)("el-form"),o=(0,t.up)("el-card"),s=(0,t.up)("NAvatar"),y=(0,t.up)("el-tag"),h=(0,t.up)("NDrawer");return(0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(h,{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),title:k.value,loading:(0,u.SU)(_),onCancel:a[1]||(a[1]=e=>D.value=!1),onConfirm:V},{default:(0,t.w5)((()=>[(0,u.SU)(A)?((0,t.wg)(),(0,t.j4)(o,{key:0,shadow:"never",header:"订单信息"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{"label-width":"80px",size:"default"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{label:"订单号",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)((0,u.SU)(A).no),1)])),_:1}),(0,t.Wm)(l,{label:"付款方式",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)((0,u.SU)(A).payment_method===(0,u.SU)(n.f)?"支付宝支付":"未支付"),1)])),_:1}),(0,t.Wm)(l,{label:"付款时间",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(S()),1)])),_:1}),(0,t.Wm)(l,{label:"创建时间",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)((0,u.SU)(A).create_time),1)])),_:1})])),_:1})])),_:1})):(0,t.kq)("",!0),(0,u.SU)(A)?((0,t.wg)(),(0,t.j4)(o,{key:1,shadow:"never",header:"商品信息",class:"mt-4"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,u.SU)(A).order_items,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a},[(0,t._)("div",d,[(0,t.Wm)(s,{src:e.goods_item.cover,class:"mr-4 w-20 h-20 rounded-2px"},null,8,["src"]),(0,t._)("div",null,[(0,t._)("div",c,(0,r.zw)(e.goods_item.title),1),e.goods_skus?((0,t.wg)(),(0,t.j4)(y,{key:0,size:"small"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(Object.values(e?.goods_skus?.skus).map((e=>e.value)).join(", ")),1)])),_:2},1024)):(0,t.kq)("",!0),(0,t._)("div",m,[(0,t._)("span",v," ¥"+(0,r.zw)(e.price),1),(0,t._)("span",g,"x "+(0,r.zw)(e.num),1)])])]),(0,t._)("div",f,[w,(0,t._)("span",b,"¥"+(0,r.zw)(e.price),1)])])))),128))])),_:1})):(0,t.kq)("",!0),(0,u.SU)(A)?((0,t.wg)(),(0,t.j4)(o,{key:2,shadow:"never",header:"收货信息",class:"mt-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{"label-width":"80px",size:"default"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{label:"收货人",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)((0,u.SU)(A).address.name),1)])),_:1}),(0,t.Wm)(l,{label:"联系方式",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)((0,u.SU)(A).address.phone),1)])),_:1}),(0,t.Wm)(l,{label:"收货地址",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(`${(0,u.SU)(A).address.province}${(0,u.SU)(A).address.city}${(0,u.SU)(A).address.district}`),1)])),_:1})])),_:1})])),_:1})):(0,t.kq)("",!0)])),_:1},8,["modelValue","title","loading"])])}}};const h=y;var _=h},80870:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});var t=l(66252),u=l(2262),r=l(11687),i=l(56868),o=l(4984),n=l(7599);const s={class:""};var p={__name:"AliDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:p,updateData:d,loading:c}=(0,o.F)({createDataApi:i.userCreateApi,updateDataApi:i.userEditApi}),m=(0,u.iH)(!1),v=(0,u.iH)([]),g=(0,u.iH)("");let f=null;(0,t.YP)(m,(()=>{m.value||(f=null)}));const w=e=>{v.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},b=({title:e,data:a})=>{if(v.value=(0,r.getAliSchema)().value,g.value=e,a){f=a;const e=v.value.findIndex((e=>"password"===e.prop));v.value.splice(e,1),w(a)}m.value=!0},y=async e=>{(0,n.t6)({message:"演示数据",type:"success"}),m.value=!1,l.getListData&&l.getListData()};return a({open:b}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(l,{visible:m.value,"onUpdate:visible":a[0]||(a[0]=e=>m.value=e),title:g.value,schema:v.value,loading:(0,u.SU)(c),formOptions:{labelWidth:"100px"},onSubmit:y},null,8,["visible","title","schema","loading"])])}}};const d=p;var c=d},13440:function(e,a,l){l.r(a),l.d(a,{default:function(){return f}});var t=l(66252),u=l(3577),r=l(2262),i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABOVJREFUaEPtmVloXFUYx//fuWFEk8zSzTYIWi1GUSsuD1ZR1NS6kSCmmdvxoVgU4/6gaftSqOmDoLUgGltsx422zOJCaVFR1AZ9EjRUqKgtSKAm3TSZmTTBJHO/T+6MCc3kzl1maZOS8xLIud/y+/733DPnfIQLZNAFwoE5kJmm5Jwis1OR2OAVSmnPCHAtAbcA0lBdEOoX4GcCfmM2diAS6nWK5/hqabHBx0VRF0C1Ts6qMy/DxPK8EQl9aOffHuTjzJ2K5fvqJOjNKyu6C23+H4pZFQc5kFmgRuQPAPO8haza0wN8CTWi2f+3VYSiICqR2gpQR6lpMfM9hbZKqYOl+svbyRusB9d7AqFk+isSrCo1cA4kEuo+214l0lKqvxwG4WsJB+73BKIS6RMALi01cDVAAJxkPbDYK0hZ1asSCFgPWC4HmzVi8xowdzopxUC3xau1Gcz5mErZFeqVYv4rCmJVbScwt/Mqkd4M4NyAoFKKmOoUKpP/nwljOSqqiJvqzo414oJkVoFYbXpTGAv2EcQG77argZsNsyqvliOIXdYFkFo8/aAQvnASuyogTkFt5rezHniuYNd/C8ALTj5nFghJO4eDOwtAjgJYNqtAFOS+rB78ZiJpLZF+SIDPnSDM+UoqMgai3WwYe0DGSdTVnEDfyCj8FzdqpBpF+BpR2s3FT5JymPXgDVPUSGaiEHniHIJIlNnYgsj8Y26CIj50vQKvFKJmgtybsyHawGH/1kn73aeXKJ/vVwAhNz4roAh3sB7ahuTQQo25aaLygICI/gFkgER+N2gshvCiM9OSOig12qkzjxp6fbJgbZiLvssNRCVerbdZD7yo4ulnAXkJRFcVDSwYB8l7pGi/0Rb40jbBZHqZEpiL3PUoSxFzv9BqtKXC8r7riOZBCHRAMe81MoHP0E7jlrZJ8WmSaWVImECPOPkvB+QI64FGFU/9AqLlToGs5gXynYK23dDrP7W1/+iv+dpFtS2stFYSedjq2XJADrEeuKmMY+qgYmnLRoLfeirC3sHLlaZahNBCwMoJ2zJAqI91/2Uqkf4Jucs5T+MIM9YiEvhxygKPp9aTyGmnu6pJm0+GrlOGmEAthu5fYZWB8wlRMM7Z7JVKU0/anRMKnQton2i0CavrzU/r5FCJTAcgE5/fXmLudA1kU0NnkJxx/hpGJTNJiLQ5aJKCcCevCb055bnkqTolPvOK6WkL+7KBXILQGAuvwJpgT008tUpAm4SwAIKFMP9ODKGdrIwdCIcOnZ1sTSzVJERbhHC7QxF6CfSqEa6PgsjT5YdLkFz4Y0pp67Jtde4XbTxztSJ+CqCXPa0soBeEbTw8EMW6pf+6sfUCYvobA/AOi+wx1bEMEBtuUMp4TEgeIEGTmyRsnukFqIspG0V4XtrOlw1Ips+ufSBE3SRyHJD+fABqEKIlJGJ7CiwRzATaxaMjUaxdfMrTV4sSmf0EaS4xcLXMejh19Da03zrtV4KdIq8BsqFaGZXmlzay7n/dkyLIdano8Plr8BSkS/iTMXoHwovMO+lpw7bRk+9WqQ9Kq15lrQhqtd1vNcfWG/Jdq33nr+FD/WBjF0dCRa9Rc58aV3XLda94oxAtJ8GN5bQbXMXD/81QNnrY53sXrbXHnezcgTh5mQHzcyAzQIQpKcwpMqdIlSrwH382SVHFhBcuAAAAAElFTkSuQmCC",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABRZJREFUaEPtWF1oHFUU/s5sd+buGmsbRfAv+KJQ8cGCUrQgjdnZrfpSFauND0IrQp+0iZpWKbZQ0CrY+BIEiT60SdeCXX9odDNb2oLgQ8WfYgV/QKi0poVIYtednyRz5CZpm2x2Z+5sd9dSM6/3O9853zn33HvuEK6Sj64SHVgUcqVVcrEi/4uKtORbbvTJbWOiNoDaQIgxeAS+NuJr/p9i0hv5ey3+qmcy6rK19IJ+lwbtfmK/HcDDALUqBHkWwCCDPnNM56gCPhBSu5AhGCIuOjVwJwOpywzkFzC+jDG/X8x4P9bCFV3ItAB9K4E6AdxZi9MAmyIR7Ykh/u751PnRKNyRhCQs/XFA2wrwfVGc1ID9lQi9pZTbp2qrLCRp6f0M2qhKXBcc4x077XarcCkJSRTEATA/qUJYbwwR+ksp97kw3lAh/6WIS8HTR7bpPB0kJlBIwjL2AHgxLBsNXD8KQg5TWs7O2H/UJCSZ19exRrkGBlmdmigL9nP2ci+HezFxAZi0jEdLpnuokmHFiiw7gmXupHEEwD1NFHIWhCz7lHPSzrG5flvy+t1TMXla4g475axSFpIY1ntA9GaTRJxgn7Mcp4PuQ+7P83wOYWlSFz3MvA2YfXIQb7BTXrY8tooVSVjGd42uBgHDPigrlji5sXaMlQeWLIjn2edtINw+d03alUw3EyokMZxYDfK/Cq8GDwD0TDiuHMF7iSlbSrtDlWwNy8hogNxGa6pxM1PKSTuHywTOhyctsYvBrwUFyD7vdDLejtkD4XWF6skBcS9p/v5Sx8S3lbjl4LnExytM9GxYcuTF7JjOh4FChGX0EbA5hGzSNt24xMweDFJMpWP6hBQATdtvd9inK3LKPoiLLsZ0H+hhIuQ6g3c4prczUEiiILJgfiqMUDp2TO/igTBTHe1VOYdN73+mfc6YM4j1mKrGJQpiEzH3yNMozN/cdWb0O+n5t/2CZk9ahqU4lhdt0722PAC5RbyU91NQYLIPYsBLin4WUDGQd0x3bXBFLDEI8AbFDG2xTbdXEYvpB5hPXUTYpGpTBfepbbrrLrvZLxHwqG16N4QGNYSlIqZ3kUYvA0iG4kMABP6gZHrzkrFgawlLbCRwv6ozYmwupd33gvpAY+5mYIUqZyiO8JadcmVvXfwqCVlDYDmeqH6nbdO9tRws+4CALQQsuLxUiavj+Anb9A4GCpGLCcs4BeA2VYdzz/U69kE192ds072lfLHyiFIwesF4QVXILK6PwecA6iJgaURbdXiVV2NFISIvHiSN502g6p4aihzT2G//Jz3xvVJFZraXeANgOfNcSV/V4z7khajvq20wbIj2T2zTfawac/ib3dJHFf8cNiR6ScqEkz54fdDEECoEB6AnlhvyP+01DYs0gFhFhDQPFwJAWKKNwF8DuLmpYhg/TGncGTa7KQuRwKQVXwloA3W9oYOyQuiLT7rbVf/aK1Xkgj952cWYTja4Kr8z8XYn5Q1E8RNJyMy/X/o4igN1LB0HeDDmxweLmeI5dbsZZCQhybzYxdqCZ3ARwDcArgOwMlIAjN8YOEbEQ+WzUySeqEKEZRwi4JE5TvoYtNsxHTmbAZ8jaejGatL4AQJdD3ArM7WCoBFonMHjBIwDODVFfFiliVUFRapIwjLOALgJMosadpc63C9UHTUapywkkY+vQizWDebjtum+3ejAovIrC4lK3Gz8opBmZzzM32JFwjLU7PXFijQ742H+/gUunNBC58T+SgAAAABJRU5ErkJggg==",n=l(80870),s=l(52786);const p={class:"flex"},d={class:"ml-2"},c={class:"font-bold"},m=(0,t.Uk)("配置");var v={__name:"PayPanel",props:{aliData:{type:Object,default:()=>({})},wxData:{type:Object,default:()=>({})},getListData:{type:Function,default:null}},setup(e){const a=e,l=(0,r.iH)([{id:0,name:"支付宝支付",desc:"该系统支付即时到账接口",img:i},{id:1,name:"微信支付",desc:"该系统支付微信网页支付和扫码支付",img:o}]),v=(0,r.iH)(null),g=(0,r.iH)(null),f=e=>{0===e?v.value.open({title:"支付宝支付配置",data:a.aliData}):g.value.open({title:"微信支付配置",data:a.wxData})};return(a,r)=>{const i=(0,t.up)("NImage"),o=(0,t.up)("el-table-column"),w=(0,t.up)("el-button"),b=(0,t.up)("el-table");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(b,{data:l.value,class:"mb-8",border:"","table-layout":"auto"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"支付方式"},{default:(0,t.w5)((({row:e})=>[(0,t._)("div",p,[(0,t.Wm)(i,{src:e.img},null,8,["src"]),(0,t._)("div",d,[(0,t._)("div",c,(0,u.zw)(e.name),1),(0,t._)("div",null,(0,u.zw)(e.desc),1)])])])),_:1}),(0,t.Wm)(o,{label:""},{default:(0,t.w5)((({row:e})=>[(0,t.Wm)(w,{type:"primary",link:"",size:"small",onClick:a=>f(e.id)},{default:(0,t.w5)((()=>[m])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.Wm)(n["default"],{ref_key:"aliDrawerRef",ref:v,getListData:e.getListData},null,8,["getListData"]),(0,t.Wm)(s["default"],{ref_key:"wxDrawerRef",ref:g},null,512)],64)}}};const g=v;var f=g},52786:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});var t=l(66252),u=l(2262),r=l(11687),i=l(56868),o=l(4984),n=l(7599);const s={class:""};var p={__name:"WxDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:p,updateData:d,loading:c}=(0,o.F)({createDataApi:i.userCreateApi,updateDataApi:i.userEditApi}),m=(0,u.iH)(!1),v=(0,u.iH)([]),g=(0,u.iH)("");let f=null;(0,t.YP)(m,(()=>{m.value||(f=null)}));const w=e=>{v.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},b=({title:e,data:a})=>{if(v.value=(0,r.getWxSchema)().value,g.value=e,a){f=a;const e=v.value.findIndex((e=>"password"===e.prop));v.value.splice(e,1),w(a)}m.value=!0},y=async e=>{(0,n.t6)({message:"演示数据",type:"success"}),m.value=!1,l.getListData&&l.getListData()};return a({open:b}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(l,{visible:m.value,"onUpdate:visible":a[0]||(a[0]=e=>m.value=e),title:g.value,schema:v.value,loading:(0,u.SU)(c),formOptions:{labelWidth:"140px"},onSubmit:y},null,8,["visible","title","schema","loading"])])}}};const d=p;var c=d},62643:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(23438),i=l(95257),o=l(4984);const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:p,loading:d}=(0,o.F)({createDataApi:i.userLevelCreateApi,updateDataApi:i.userLevelEditApi}),c=(0,u.iH)(!1),m=(0,u.iH)([]),v=(0,u.iH)("");let g=null;(0,t.YP)(c,(()=>{c.value||(g=null)}));const f=e=>{m.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},w=({title:e,data:a})=>{m.value=(0,r.getActionSchema)().value,v.value=e,a&&(g=a,f(a)),c.value=!0},b=async e=>{g?await p({params:{...e,id:g.id},callback:()=>{c.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{c.value=!1,l.getListData&&l.getListData()}})};return a({open:w}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:c.value,"onUpdate:visible":a[0]||(a[0]=e=>c.value=e),title:v.value,schema:m.value,loading:(0,u.SU)(d),formOptions:{labelWidth:"200px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p},24288:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(66252),u=l(2262),r=l(7461),i=l(56868),o=l(4984);const n={class:""};var s={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(e,{expose:a}){const l=e,{createData:s,updateData:p,loading:d}=(0,o.F)({createDataApi:i.userCreateApi,updateDataApi:i.userEditApi}),c=(0,u.iH)(!1),m=(0,u.iH)([]),v=(0,u.iH)("");let g=null;(0,t.YP)(c,(()=>{c.value||(g=null)}));const f=e=>{m.value.forEach((a=>{const l=a.prop;l&&(a.value=e[l])}))},w=({title:e,data:a})=>{if(m.value=(0,r.getActionSchema)().value,v.value=e,a){g=a;const e=m.value.findIndex((e=>"password"===e.prop));m.value.splice(e,1),f(a)}c.value=!0},b=async e=>{g?await p({params:{...e,id:g.id},callback:()=>{c.value=!1,l.getListData&&l.getListData()}}):await s({params:e,callback:()=>{c.value=!1,l.getListData&&l.getListData()}})};return a({open:w}),(e,a)=>{const l=(0,t.up)("NDrawerForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(l,{visible:c.value,"onUpdate:visible":a[0]||(a[0]=e=>c.value=e),title:v.value,schema:m.value,loading:(0,u.SU)(d),formOptions:{labelWidth:"100px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const p=s;var d=p}}]);