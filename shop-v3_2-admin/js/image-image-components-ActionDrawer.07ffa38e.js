"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[420],{97064:function(a,e,t){t.r(e),t.d(e,{default:function(){return p}});var i=t(66252),l=t(2262),u=t(7308),s=t(56868),n=t(4984);const c={class:""};var r={__name:"ActionDrawer",props:{getListData:{type:Function,default:null}},setup(a,{expose:e}){const t=a,{createData:r,updateData:o,loading:p}=(0,n.F)({createDataApi:s.userCreateApi,updateDataApi:s.userEditApi}),v=(0,l.iH)(!1),d=(0,l.iH)([]),D=(0,l.iH)("");let f=null;(0,i.YP)(v,(()=>{v.value||(f=null)}));const g=a=>{d.value.forEach((e=>{const t=e.prop;t&&(e.value=a[t])}))},m=({title:a,data:e})=>{if(d.value=(0,u.getActionSchema)().value,D.value=a,e){f=e;const a=d.value.findIndex((a=>"password"===a.prop));d.value.splice(a,1),g(e)}v.value=!0},b=async a=>{f?await o({params:{...a,id:f.id},callback:()=>{v.value=!1,t.getListData&&t.getListData()}}):await r({params:a,callback:()=>{v.value=!1,t.getListData&&t.getListData()}})};return e({open:m}),(a,e)=>{const t=(0,i.up)("NDrawerForm");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(t,{visible:v.value,"onUpdate:visible":e[0]||(e[0]=a=>v.value=a),title:D.value,schema:d.value,loading:(0,l.SU)(p),formOptions:{labelWidth:"100px"},onSubmit:b},null,8,["visible","title","schema","loading"])])}}};const o=r;var p=o}}]);